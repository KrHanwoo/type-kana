var Zn=Object.defineProperty,Gn=Object.defineProperties;var Un=Object.getOwnPropertyDescriptors;var qe=Object.getOwnPropertySymbols;var Tt=Object.prototype.hasOwnProperty,At=Object.prototype.propertyIsEnumerable;var Mt=(e,n,t)=>n in e?Zn(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,S=(e,n)=>{for(var t in n||(n={}))Tt.call(n,t)&&Mt(e,t,n[t]);if(qe)for(var t of qe(n))At.call(n,t)&&Mt(e,t,n[t]);return e},P=(e,n)=>Gn(e,Un(n));var De=(e,n)=>{var t={};for(var r in e)Tt.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&qe)for(var r of qe(e))n.indexOf(r)<0&&At.call(e,r)&&(t[r]=e[r]);return t};import{w as Xn}from"./index-76f9cd11.js";const Yn=Object.freeze({serialize:JSON.stringify,deserialize:JSON.parse});function wc(e){var h;const n=S(S({},Yn),e),{key:t,storage_type:r,start_value:o,serialize:a,deserialize:l}=n,i=typeof window!="undefined"&&(h=window[r])!=null?h:void 0,s=Xn(o,function(){function p(g){g.key===t&&d()}if(!!i)return d(),window.addEventListener("storage",p),function(){window.removeEventListener("storage",p)}});function u(f){s.set(f),i==null||i.setItem(t,a(f))}function c(f){s.update(p=>{const g=f(p);return i==null||i.setItem(t,a(g)),g})}function d(){const f=i==null?void 0:i.getItem(t);f==null?u(o):s.set(l(f))}return{set:u,update:c,subscribe:s.subscribe}}const Et=(e,n,t)=>({endTime:n,insertTime:t,type:"exponentialRampToValue",value:e}),bt=(e,n,t)=>({endTime:n,insertTime:t,type:"linearRampToValue",value:e}),lt=(e,n)=>({startTime:n,type:"setValue",value:e}),zt=(e,n,t)=>({duration:t,startTime:n,type:"setValueCurve",values:e}),$t=(e,n,{startTime:t,target:r,timeConstant:o})=>r+(n-r)*Math.exp((t-e)/o),Ie=e=>e.type==="exponentialRampToValue",Xe=e=>e.type==="linearRampToValue",fe=e=>Ie(e)||Xe(e),Nt=e=>e.type==="setValue",ce=e=>e.type==="setValueCurve",Ye=(e,n,t,r)=>{const o=e[n];return o===void 0?r:fe(o)||Nt(o)?o.value:ce(o)?o.values[o.values.length-1]:$t(t,Ye(e,n-1,o.startTime,r),o)},Dt=(e,n,t,r,o)=>t===void 0?[r.insertTime,o]:fe(t)?[t.endTime,t.value]:Nt(t)?[t.startTime,t.value]:ce(t)?[t.startTime+t.duration,t.values[t.values.length-1]]:[t.startTime,Ye(e,n-1,t.startTime,o)],ut=e=>e.type==="cancelAndHold",dt=e=>e.type==="cancelScheduledValues",he=e=>ut(e)||dt(e)?e.cancelTime:Ie(e)||Xe(e)?e.endTime:e.startTime,Ot=(e,n,t,{endTime:r,value:o})=>t===o?o:0<t&&0<o||t<0&&o<0?t*(o/t)**((e-n)/(r-n)):0,Rt=(e,n,t,{endTime:r,value:o})=>t+(e-n)/(r-n)*(o-t),jn=(e,n)=>{const t=Math.floor(n),r=Math.ceil(n);return t===r?e[t]:(1-(n-t))*e[t]+(1-(r-n))*e[r]},zn=(e,{duration:n,startTime:t,values:r})=>{const o=(e-t)/n*(r.length-1);return jn(r,o)},Ze=e=>e.type==="setTarget";class $n{constructor(n){this._automationEvents=[],this._currenTime=0,this._defaultValue=n}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(n){const t=he(n);if(ut(n)||dt(n)){const r=this._automationEvents.findIndex(a=>dt(n)&&ce(a)?a.startTime+a.duration>=t:he(a)>=t),o=this._automationEvents[r];if(r!==-1&&(this._automationEvents=this._automationEvents.slice(0,r)),ut(n)){const a=this._automationEvents[this._automationEvents.length-1];if(o!==void 0&&fe(o)){if(Ze(a))throw new Error("The internal list is malformed.");const l=ce(a)?a.startTime+a.duration:he(a),i=ce(a)?a.values[a.values.length-1]:a.value,s=Ie(o)?Ot(t,l,i,o):Rt(t,l,i,o),u=Ie(o)?Et(s,t,this._currenTime):bt(s,t,this._currenTime);this._automationEvents.push(u)}a!==void 0&&Ze(a)&&this._automationEvents.push(lt(this.getValue(t),t)),a!==void 0&&ce(a)&&a.startTime+a.duration>t&&(this._automationEvents[this._automationEvents.length-1]=zt(new Float32Array([6,7]),a.startTime,t-a.startTime))}}else{const r=this._automationEvents.findIndex(l=>he(l)>t),o=r===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[r-1];if(o!==void 0&&ce(o)&&he(o)+o.duration>t)return!1;const a=Ie(n)?Et(n.value,n.endTime,this._currenTime):Xe(n)?bt(n.value,t,this._currenTime):n;if(r===-1)this._automationEvents.push(a);else{if(ce(n)&&t+n.duration>he(this._automationEvents[r]))return!1;this._automationEvents.splice(r,0,a)}}return!0}flush(n){const t=this._automationEvents.findIndex(r=>he(r)>n);if(t>1){const r=this._automationEvents.slice(t-1),o=r[0];Ze(o)&&r.unshift(lt(Ye(this._automationEvents,t-2,o.startTime,this._defaultValue),o.startTime)),this._automationEvents=r}}getValue(n){if(this._automationEvents.length===0)return this._defaultValue;const t=this._automationEvents.findIndex(l=>he(l)>n),r=this._automationEvents[t],o=(t===-1?this._automationEvents.length:t)-1,a=this._automationEvents[o];if(a!==void 0&&Ze(a)&&(r===void 0||!fe(r)||r.insertTime>n))return $t(n,Ye(this._automationEvents,o-1,a.startTime,this._defaultValue),a);if(a!==void 0&&Nt(a)&&(r===void 0||!fe(r)))return a.value;if(a!==void 0&&ce(a)&&(r===void 0||!fe(r)||a.startTime+a.duration>n))return n<a.startTime+a.duration?zn(n,a):a.values[a.values.length-1];if(a!==void 0&&fe(a)&&(r===void 0||!fe(r)))return a.value;if(r!==void 0&&Ie(r)){const[l,i]=Dt(this._automationEvents,o,a,r,this._defaultValue);return Ot(n,l,i,r)}if(r!==void 0&&Xe(r)){const[l,i]=Dt(this._automationEvents,o,a,r,this._defaultValue);return Rt(n,l,i,r)}return this._defaultValue}}const Qn=e=>({cancelTime:e,type:"cancelAndHold"}),Hn=e=>({cancelTime:e,type:"cancelScheduledValues"}),xn=(e,n)=>({endTime:n,type:"exponentialRampToValue",value:e}),Jn=(e,n)=>({endTime:n,type:"linearRampToValue",value:e}),Kn=(e,n,t)=>({startTime:n,target:e,timeConstant:t,type:"setTarget"}),er=()=>new DOMException("","AbortError"),tr=e=>(n,t,[r,o,a],l)=>{e(n[o],[t,r,a],i=>i[0]===t&&i[1]===r,l)},nr=e=>(n,t,r)=>{const o=[];for(let a=0;a<r.numberOfInputs;a+=1)o.push(new Set);e.set(n,{activeInputs:o,outputs:new Set,passiveInputs:new WeakMap,renderer:t})},rr=e=>(n,t)=>{e.set(n,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:t})},Se=new WeakSet,Qt=new WeakMap,Ht=new WeakMap,xt=new WeakMap,Jt=new WeakMap,Kt=new WeakMap,en=new WeakMap,ht=new WeakMap,Ft=new WeakMap,tn={construct(){return tn}},or=e=>{try{const n=new Proxy(e,tn);new n}catch{return!1}return!0},Pt=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,kt=(e,n)=>{const t=[];let r=e.replace(/^[\s]+/,""),o=r.match(Pt);for(;o!==null;){const a=o[1].slice(1,-1),l=o[0].replace(/([\s]+)?;?$/,"").replace(a,new URL(a,n).toString());t.push(l),r=r.slice(o[0].length).replace(/^[\s]+/,""),o=r.match(Pt)}return[t.join(";"),r]},Wt=e=>{if(e!==void 0&&!Array.isArray(e))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},Vt=e=>{if(!or(e))throw new TypeError("The given value for processorCtor should be a constructor.");if(e.prototype===null||typeof e.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},sr=(e,n,t,r,o,a,l,i,s,u,c,d,h)=>{let f=0;return(p,g,N={credentials:"omit"})=>{const v=c.get(p);if(v!==void 0&&v.has(g))return Promise.resolve();const I=u.get(p);if(I!==void 0){const y=I.get(g);if(y!==void 0)return y}const E=a(p),A=E.audioWorklet===void 0?o(g).then(([y,w])=>{const[m,C]=kt(y,w),T=`${m};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${C}
})})(window,'_AWGS')`;return t(T)}).then(()=>{const y=h._AWGS.pop();if(y===void 0)throw new SyntaxError;r(E.currentTime,E.sampleRate,()=>y(class{},void 0,(w,m)=>{if(w.trim()==="")throw n();const C=Ft.get(E);if(C!==void 0){if(C.has(w))throw n();Vt(m),Wt(m.parameterDescriptors),C.set(w,m)}else Vt(m),Wt(m.parameterDescriptors),Ft.set(E,new Map([[w,m]]))},E.sampleRate,void 0,void 0))}):Promise.all([o(g),Promise.resolve(e(d,d))]).then(([[y,w],m])=>{const C=f+1;f=C;const[T,R]=kt(y,w),M=`${T};((AudioWorkletProcessor,registerProcessor)=>{${R}
})(${m?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${m?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${m?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${C}',class extends AudioWorkletProcessor{process(){return !1}})`,b=new Blob([M],{type:"application/javascript; charset=utf-8"}),D=URL.createObjectURL(b);return E.audioWorklet.addModule(D,N).then(()=>{if(i(E))return E;const W=l(E);return W.audioWorklet.addModule(D,N).then(()=>W)}).then(W=>{if(s===null)throw new SyntaxError;try{new s(W,`__sac${C}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(D))});return I===void 0?u.set(p,new Map([[g,A]])):I.set(g,A),A.then(()=>{const y=c.get(p);y===void 0?c.set(p,new Set([g])):y.add(g)}).finally(()=>{const y=u.get(p);y!==void 0&&y.delete(g)}),A}},pe=(e,n)=>{const t=e.get(n);if(t===void 0)throw new Error("A value with the given key could not be found.");return t},Qe=(e,n)=>{const t=Array.from(e).filter(n);if(t.length>1)throw Error("More than one element was found.");if(t.length===0)throw Error("No element was found.");const[r]=t;return e.delete(r),r},nn=(e,n,t,r)=>{const o=pe(e,n),a=Qe(o,l=>l[0]===t&&l[1]===r);return o.size===0&&e.delete(n),a},Re=e=>pe(en,e),Me=e=>{if(Se.has(e))throw new Error("The AudioNode is already stored.");Se.add(e),Re(e).forEach(n=>n(!0))},rn=e=>"port"in e,Fe=e=>{if(!Se.has(e))throw new Error("The AudioNode is not stored.");Se.delete(e),Re(e).forEach(n=>n(!1))},ft=(e,n)=>{!rn(e)&&n.every(t=>t.size===0)&&Fe(e)},ar=(e,n,t,r,o,a,l,i,s,u,c,d,h)=>{const f=new WeakMap;return(p,g,N,v,I)=>{const{activeInputs:E,passiveInputs:A}=a(g),{outputs:y}=a(p),w=i(p),m=C=>{const T=s(g),R=s(p);if(C){const O=nn(A,p,N,v);e(E,p,O,!1),!I&&!d(p)&&t(R,T,N,v),h(g)&&Me(g)}else{const O=r(E,p,N,v);n(A,v,O,!1),!I&&!d(p)&&o(R,T,N,v);const _=l(g);if(_===0)c(g)&&ft(g,E);else{const k=f.get(g);k!==void 0&&clearTimeout(k),f.set(g,setTimeout(()=>{c(g)&&ft(g,E)},_*1e3))}}};return u(y,[g,N,v],C=>C[0]===g&&C[1]===N&&C[2]===v,!0)?(w.add(m),c(p)?e(E,p,[N,v,m],!0):n(A,v,[p,N,m],!0),!0):!1}},cr=e=>(n,t,[r,o,a],l)=>{const i=n.get(r);i===void 0?n.set(r,new Set([[o,t,a]])):e(i,[o,t,a],s=>s[0]===o&&s[1]===t,l)},ir=e=>(n,t)=>{const r=e(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});t.connect(r).connect(n.destination);const o=()=>{t.removeEventListener("ended",o),t.disconnect(r),r.disconnect()};t.addEventListener("ended",o)},lr={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},ur=(e,n,t,r,o,a)=>class extends e{constructor(i,s){const u=o(i),c=S(S({},lr),s),d=r(u,c),h=a(u)?n():null;super(i,!1,d,h),this._nativeAnalyserNode=d}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(i){this._nativeAnalyserNode.fftSize=i}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(i){const s=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=i,!(i>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=s,t()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(i){const s=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=i,!(this._nativeAnalyserNode.maxDecibels>i))throw this._nativeAnalyserNode.minDecibels=s,t()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(i){this._nativeAnalyserNode.smoothingTimeConstant=i}getByteFrequencyData(i){this._nativeAnalyserNode.getByteFrequencyData(i)}getByteTimeDomainData(i){this._nativeAnalyserNode.getByteTimeDomainData(i)}getFloatFrequencyData(i){this._nativeAnalyserNode.getFloatFrequencyData(i)}getFloatTimeDomainData(i){this._nativeAnalyserNode.getFloatTimeDomainData(i)}},J=(e,n)=>e.context===n,dr=(e,n,t)=>()=>{const r=new WeakMap,o=async(a,l,i)=>{let s=n(a);if(!J(s,l)){const c={channelCount:s.channelCount,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,fftSize:s.fftSize,maxDecibels:s.maxDecibels,minDecibels:s.minDecibels,smoothingTimeConstant:s.smoothingTimeConstant};s=e(l,c)}return r.set(l,s),await t(a,l,s,i),s};return{render(a,l,i){const s=r.get(l);return s!==void 0?Promise.resolve(s):o(a,l,i)}}},pt=e=>{try{e.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},ge=()=>new DOMException("","IndexSizeError"),on=e=>{e.getChannelData=(n=>t=>{try{return n.call(e,t)}catch(r){throw r.code===12?ge():r}})(e.getChannelData)},hr={numberOfChannels:1},fr=(e,n,t,r,o,a,l,i)=>{let s=null;return class sn{constructor(c){if(o===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:d,numberOfChannels:h,sampleRate:f}=S(S({},hr),c);s===null&&(s=new o(1,1,44100));const p=r!==null&&n(a,a)?new r({length:d,numberOfChannels:h,sampleRate:f}):s.createBuffer(h,d,f);if(p.numberOfChannels===0)throw t();return typeof p.copyFromChannel!="function"?(l(p),on(p)):n(pt,()=>pt(p))||i(p),e.add(p),p}static[Symbol.hasInstance](c){return c!==null&&typeof c=="object"&&Object.getPrototypeOf(c)===sn.prototype||e.has(c)}}},te=-34028234663852886e22,ee=-te,ie=e=>Se.has(e),pr={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},mr=(e,n,t,r,o,a,l,i)=>class extends e{constructor(u,c){const d=a(u),h=S(S({},pr),c),f=o(d,h),p=l(d),g=p?n():null;super(u,!1,f,g),this._audioBufferSourceNodeRenderer=g,this._isBufferNullified=!1,this._isBufferSet=h.buffer!==null,this._nativeAudioBufferSourceNode=f,this._onended=null,this._playbackRate=t(this,p,f.playbackRate,ee,te)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(u){if(this._nativeAudioBufferSourceNode.buffer=u,u!==null){if(this._isBufferSet)throw r();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(u){this._nativeAudioBufferSourceNode.loop=u}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(u){this._nativeAudioBufferSourceNode.loopEnd=u}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(u){this._nativeAudioBufferSourceNode.loopStart=u}get onended(){return this._onended}set onended(u){const c=typeof u=="function"?i(this,u):null;this._nativeAudioBufferSourceNode.onended=c;const d=this._nativeAudioBufferSourceNode.onended;this._onended=d!==null&&d===c?u:d}get playbackRate(){return this._playbackRate}start(u=0,c=0,d){if(this._nativeAudioBufferSourceNode.start(u,c,d),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=d===void 0?[u,c]:[u,c,d]),this.context.state!=="closed"){Me(this);const h=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",h),ie(this)&&Fe(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",h)}}stop(u=0){this._nativeAudioBufferSourceNode.stop(u),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=u)}},gr=(e,n,t,r,o)=>()=>{const a=new WeakMap;let l=null,i=null;const s=async(u,c,d)=>{let h=t(u);const f=J(h,c);if(!f){const p={buffer:h.buffer,channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,loop:h.loop,loopEnd:h.loopEnd,loopStart:h.loopStart,playbackRate:h.playbackRate.value};h=n(c,p),l!==null&&h.start(...l),i!==null&&h.stop(i)}return a.set(c,h),f?await e(c,u.playbackRate,h.playbackRate,d):await r(c,u.playbackRate,h.playbackRate,d),await o(u,c,h,d),h};return{set start(u){l=u},set stop(u){i=u},render(u,c,d){const h=a.get(c);return h!==void 0?Promise.resolve(h):s(u,c,d)}}},Nr=e=>"playbackRate"in e,vr=e=>"frequency"in e&&"gain"in e,Cr=e=>"offset"in e,yr=e=>!("frequency"in e)&&"gain"in e,wr=e=>"detune"in e&&"frequency"in e,_r=e=>"pan"in e,ne=e=>pe(Qt,e),Pe=e=>pe(xt,e),mt=(e,n)=>{const{activeInputs:t}=ne(e);t.forEach(o=>o.forEach(([a])=>{n.includes(e)||mt(a,[...n,e])}));const r=Nr(e)?[e.playbackRate]:rn(e)?Array.from(e.parameters.values()):vr(e)?[e.Q,e.detune,e.frequency,e.gain]:Cr(e)?[e.offset]:yr(e)?[e.gain]:wr(e)?[e.detune,e.frequency]:_r(e)?[e.pan]:[];for(const o of r){const a=Pe(o);a!==void 0&&a.activeInputs.forEach(([l])=>mt(l,n))}ie(e)&&Fe(e)},Ir=e=>{mt(e.destination,[])},Sr=e=>e===void 0||typeof e=="number"||typeof e=="string"&&(e==="balanced"||e==="interactive"||e==="playback"),Mr=(e,n,t,r,o,a,l,i,s)=>class extends e{constructor(c={}){if(s===null)throw new Error("Missing the native AudioContext constructor.");let d;try{d=new s(c)}catch(p){throw p.code===12&&p.message==="sampleRate is not in range"?t():p}if(d===null)throw r();if(!Sr(c.latencyHint))throw new TypeError(`The provided value '${c.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(c.sampleRate!==void 0&&d.sampleRate!==c.sampleRate)throw t();super(d,2);const{latencyHint:h}=c,{sampleRate:f}=d;if(this._baseLatency=typeof d.baseLatency=="number"?d.baseLatency:h==="balanced"?512/f:h==="interactive"||h===void 0?256/f:h==="playback"?1024/f:Math.max(2,Math.min(128,Math.round(h*f/128)))*128/f,this._nativeAudioContext=d,s.name==="webkitAudioContext"?(this._nativeGainNode=d.createGain(),this._nativeOscillatorNode=d.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(d.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,d.state==="running"){this._state="suspended";const p=()=>{this._state==="suspended"&&(this._state=null),d.removeEventListener("statechange",p)};d.addEventListener("statechange",p)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw n()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),Ir(this)}))}createMediaElementSource(c){return new o(this,{mediaElement:c})}createMediaStreamDestination(){return new a(this)}createMediaStreamSource(c){return new l(this,{mediaStream:c})}createMediaStreamTrackSource(c){return new i(this,{mediaStreamTrack:c})}resume(){return this._state==="suspended"?new Promise((c,d)=>{const h=()=>{this._nativeAudioContext.removeEventListener("statechange",h),this._nativeAudioContext.state==="running"?c():this.resume().then(c,d)};this._nativeAudioContext.addEventListener("statechange",h)}):this._nativeAudioContext.resume().catch(c=>{throw c===void 0||c.code===15?n():c})}suspend(){return this._nativeAudioContext.suspend().catch(c=>{throw c===void 0?n():c})}},Tr=(e,n,t,r,o,a,l,i)=>class extends e{constructor(u,c){const d=a(u),h=l(d),f=o(d,c,h),p=h?n(i):null;super(u,!1,f,p),this._isNodeOfNativeOfflineAudioContext=h,this._nativeAudioDestinationNode=f}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(u){if(this._isNodeOfNativeOfflineAudioContext)throw r();if(u>this._nativeAudioDestinationNode.maxChannelCount)throw t();this._nativeAudioDestinationNode.channelCount=u}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(u){if(this._isNodeOfNativeOfflineAudioContext)throw r();this._nativeAudioDestinationNode.channelCountMode=u}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},Ar=e=>{let n=null;const t=async(r,o,a)=>{const l=o.destination;return await e(r,o,l,a),l};return{render(r,o,a){return n===null&&(n=t(r,o,a)),n}}},Er=(e,n,t,r,o,a,l,i)=>(s,u)=>{const c=u.listener,d=()=>{const y=new Float32Array(1),w=n(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),m=l(u);let C=!1,T=[0,0,-1,0,1,0],R=[0,0,0];const O=()=>{if(C)return;C=!0;const b=r(u,256,9,0);b.onaudioprocess=({inputBuffer:D})=>{const W=[a(D,y,0),a(D,y,1),a(D,y,2),a(D,y,3),a(D,y,4),a(D,y,5)];W.some((V,L)=>V!==T[L])&&(c.setOrientation(...W),T=W);const Z=[a(D,y,6),a(D,y,7),a(D,y,8)];Z.some((V,L)=>V!==R[L])&&(c.setPosition(...Z),R=Z)},w.connect(b)},_=b=>D=>{D!==T[b]&&(T[b]=D,c.setOrientation(...T))},k=b=>D=>{D!==R[b]&&(R[b]=D,c.setPosition(...R))},M=(b,D,W)=>{const Z=t(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:D});Z.connect(w,0,b),Z.start(),Object.defineProperty(Z.offset,"defaultValue",{get(){return D}});const V=e({context:s},m,Z.offset,ee,te);return i(V,"value",L=>()=>L.call(V),L=>Y=>{try{L.call(V,Y)}catch(z){if(z.code!==9)throw z}O(),m&&W(Y)}),V.cancelAndHoldAtTime=(L=>m?()=>{throw o()}:(...Y)=>{const z=L.apply(V,Y);return O(),z})(V.cancelAndHoldAtTime),V.cancelScheduledValues=(L=>m?()=>{throw o()}:(...Y)=>{const z=L.apply(V,Y);return O(),z})(V.cancelScheduledValues),V.exponentialRampToValueAtTime=(L=>m?()=>{throw o()}:(...Y)=>{const z=L.apply(V,Y);return O(),z})(V.exponentialRampToValueAtTime),V.linearRampToValueAtTime=(L=>m?()=>{throw o()}:(...Y)=>{const z=L.apply(V,Y);return O(),z})(V.linearRampToValueAtTime),V.setTargetAtTime=(L=>m?()=>{throw o()}:(...Y)=>{const z=L.apply(V,Y);return O(),z})(V.setTargetAtTime),V.setValueAtTime=(L=>m?()=>{throw o()}:(...Y)=>{const z=L.apply(V,Y);return O(),z})(V.setValueAtTime),V.setValueCurveAtTime=(L=>m?()=>{throw o()}:(...Y)=>{const z=L.apply(V,Y);return O(),z})(V.setValueCurveAtTime),V};return{forwardX:M(0,0,_(0)),forwardY:M(1,0,_(1)),forwardZ:M(2,-1,_(2)),positionX:M(6,0,k(0)),positionY:M(7,0,k(1)),positionZ:M(8,0,k(2)),upX:M(3,0,_(3)),upY:M(4,1,_(4)),upZ:M(5,0,_(5))}},{forwardX:h,forwardY:f,forwardZ:p,positionX:g,positionY:N,positionZ:v,upX:I,upY:E,upZ:A}=c.forwardX===void 0?d():c;return{get forwardX(){return h},get forwardY(){return f},get forwardZ(){return p},get positionX(){return g},get positionY(){return N},get positionZ(){return v},get upX(){return I},get upY(){return E},get upZ(){return A}}},je=e=>"context"in e,ke=e=>je(e[0]),Ne=(e,n,t,r)=>{for(const o of e)if(t(o)){if(r)return!1;throw Error("The set contains at least one similar element.")}return e.add(n),!0},Bt=(e,n,[t,r],o)=>{Ne(e,[n,t,r],a=>a[0]===n&&a[1]===t,o)},Lt=(e,[n,t,r],o)=>{const a=e.get(n);a===void 0?e.set(n,new Set([[t,r]])):Ne(a,[t,r],l=>l[0]===t,o)},Te=e=>"inputs"in e,ze=(e,n,t,r)=>{if(Te(n)){const o=n.inputs[r];return e.connect(o,t,0),[o,t,0]}return e.connect(n,t,r),[n,t,r]},an=(e,n,t)=>{for(const r of e)if(r[0]===n&&r[1]===t)return e.delete(r),r;return null},br=(e,n,t)=>Qe(e,r=>r[0]===n&&r[1]===t),cn=(e,n)=>{if(!Re(e).delete(n))throw new Error("Missing the expected event listener.")},ln=(e,n,t)=>{const r=pe(e,n),o=Qe(r,a=>a[0]===t);return r.size===0&&e.delete(n),o},$e=(e,n,t,r)=>{Te(n)?e.disconnect(n.inputs[r],t,0):e.disconnect(n,t,r)},X=e=>pe(Ht,e),Oe=e=>pe(Jt,e),me=e=>ht.has(e),Ue=e=>!Se.has(e),qt=e=>new Promise(n=>{const t=e.createScriptProcessor(256,1,1),r=e.createGain(),o=e.createBuffer(1,2,44100),a=o.getChannelData(0);a[0]=1,a[1]=1;const l=e.createBufferSource();l.buffer=o,l.loop=!0,l.connect(t).connect(e.destination),l.connect(r),l.disconnect(r),t.onaudioprocess=i=>{const s=i.inputBuffer.getChannelData(0);Array.prototype.some.call(s,u=>u===1)?n(!0):n(!1),l.stop(),t.onaudioprocess=null,l.disconnect(t),t.disconnect(e.destination)},l.start()}),at=(e,n)=>{const t=new Map;for(const r of e)for(const o of r){const a=t.get(o);t.set(o,a===void 0?1:a+1)}t.forEach((r,o)=>n(o,r))},Zt=e=>"context"in e,Dr=e=>{const n=new Map;e.connect=(t=>(r,o=0,a=0)=>{const l=Zt(r)?t(r,o,a):t(r,o),i=n.get(r);return i===void 0?n.set(r,[{input:a,output:o}]):i.every(s=>s.input!==a||s.output!==o)&&i.push({input:a,output:o}),l})(e.connect.bind(e)),e.disconnect=(t=>(r,o,a)=>{if(t.apply(e),r===void 0)n.clear();else if(typeof r=="number")for(const[l,i]of n){const s=i.filter(u=>u.output!==r);s.length===0?n.delete(l):n.set(l,s)}else if(n.has(r))if(o===void 0)n.delete(r);else{const l=n.get(r);if(l!==void 0){const i=l.filter(s=>s.output!==o&&(s.input!==a||a===void 0));i.length===0?n.delete(r):n.set(r,i)}}for(const[l,i]of n)i.forEach(s=>{Zt(l)?e.connect(l,s.output,s.input):e.connect(l,s.output)})})(e.disconnect)},Or=(e,n,t,r)=>{const{activeInputs:o,passiveInputs:a}=Pe(n),{outputs:l}=ne(e),i=Re(e),s=u=>{const c=X(e),d=Oe(n);if(u){const h=ln(a,e,t);Bt(o,e,h,!1),!r&&!me(e)&&c.connect(d,t)}else{const h=br(o,e,t);Lt(a,h,!1),!r&&!me(e)&&c.disconnect(d,t)}};return Ne(l,[n,t],u=>u[0]===n&&u[1]===t,!0)?(i.add(s),ie(e)?Bt(o,e,[t,s],!0):Lt(a,[e,t,s],!0),!0):!1},Rr=(e,n,t,r)=>{const{activeInputs:o,passiveInputs:a}=ne(n),l=an(o[r],e,t);return l===null?[nn(a,e,t,r)[2],!1]:[l[2],!0]},Fr=(e,n,t)=>{const{activeInputs:r,passiveInputs:o}=Pe(n),a=an(r,e,t);return a===null?[ln(o,e,t)[1],!1]:[a[2],!0]},vt=(e,n,t,r,o)=>{const[a,l]=Rr(e,t,r,o);if(a!==null&&(cn(e,a),l&&!n&&!me(e)&&$e(X(e),X(t),r,o)),ie(t)){const{activeInputs:i}=ne(t);ft(t,i)}},Ct=(e,n,t,r)=>{const[o,a]=Fr(e,t,r);o!==null&&(cn(e,o),a&&!n&&!me(e)&&X(e).disconnect(Oe(t),r))},Pr=(e,n)=>{const t=ne(e),r=[];for(const o of t.outputs)ke(o)?vt(e,n,...o):Ct(e,n,...o),r.push(o[0]);return t.outputs.clear(),r},kr=(e,n,t)=>{const r=ne(e),o=[];for(const a of r.outputs)a[1]===t&&(ke(a)?vt(e,n,...a):Ct(e,n,...a),o.push(a[0]),r.outputs.delete(a));return o},Wr=(e,n,t,r,o)=>{const a=ne(e);return Array.from(a.outputs).filter(l=>l[0]===t&&(r===void 0||l[1]===r)&&(o===void 0||l[2]===o)).map(l=>(ke(l)?vt(e,n,...l):Ct(e,n,...l),a.outputs.delete(l),l[0]))},Vr=(e,n,t,r,o,a,l,i,s,u,c,d,h,f,p)=>class extends u{constructor(N,v,I,E){super(I),this._context=N,this._nativeAudioNode=I;const A=c(N);d(A)&&t(qt,()=>qt(A))!==!0&&Dr(I),Ht.set(this,I),en.set(this,new Set),N.state!=="closed"&&v&&Me(this),e(this,E,I)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(N){this._nativeAudioNode.channelCount=N}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(N){this._nativeAudioNode.channelCountMode=N}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(N){this._nativeAudioNode.channelInterpretation=N}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(N,v=0,I=0){if(v<0||v>=this._nativeAudioNode.numberOfOutputs)throw o();const E=c(this._context),A=p(E);if(h(N)||f(N))throw a();if(je(N)){const m=X(N);try{const T=ze(this._nativeAudioNode,m,v,I),R=Ue(this);(A||R)&&this._nativeAudioNode.disconnect(...T),this.context.state!=="closed"&&!R&&Ue(N)&&Me(N)}catch(T){throw T.code===12?a():T}if(n(this,N,v,I,A)){const T=s([this],N);at(T,r(A))}return N}const y=Oe(N);if(y.name==="playbackRate"&&y.maxValue===1024)throw l();try{this._nativeAudioNode.connect(y,v),(A||Ue(this))&&this._nativeAudioNode.disconnect(y,v)}catch(m){throw m.code===12?a():m}if(Or(this,N,v,A)){const m=s([this],N);at(m,r(A))}}disconnect(N,v,I){let E;const A=c(this._context),y=p(A);if(N===void 0)E=Pr(this,y);else if(typeof N=="number"){if(N<0||N>=this.numberOfOutputs)throw o();E=kr(this,y,N)}else{if(v!==void 0&&(v<0||v>=this.numberOfOutputs)||je(N)&&I!==void 0&&(I<0||I>=N.numberOfInputs))throw o();if(E=Wr(this,y,N,v,I),E.length===0)throw a()}for(const w of E){const m=s([this],w);at(m,i)}}},Br=(e,n,t,r,o,a,l,i,s,u,c,d,h)=>(f,p,g,N=null,v=null)=>{const I=new $n(g.defaultValue),E=p?r(I):null,A={get defaultValue(){return g.defaultValue},get maxValue(){return N===null?g.maxValue:N},get minValue(){return v===null?g.minValue:v},get value(){return g.value},set value(y){g.value=y,A.setValueAtTime(y,f.context.currentTime)},cancelAndHoldAtTime(y){if(typeof g.cancelAndHoldAtTime=="function")E===null&&I.flush(f.context.currentTime),I.add(o(y)),g.cancelAndHoldAtTime(y);else{const w=Array.from(I).pop();E===null&&I.flush(f.context.currentTime),I.add(o(y));const m=Array.from(I).pop();g.cancelScheduledValues(y),w!==m&&m!==void 0&&(m.type==="exponentialRampToValue"?g.exponentialRampToValueAtTime(m.value,m.endTime):m.type==="linearRampToValue"?g.linearRampToValueAtTime(m.value,m.endTime):m.type==="setValue"?g.setValueAtTime(m.value,m.startTime):m.type==="setValueCurve"&&g.setValueCurveAtTime(m.values,m.startTime,m.duration))}return A},cancelScheduledValues(y){return E===null&&I.flush(f.context.currentTime),I.add(a(y)),g.cancelScheduledValues(y),A},exponentialRampToValueAtTime(y,w){if(y===0)throw new RangeError;if(!Number.isFinite(w)||w<0)throw new RangeError;return E===null&&I.flush(f.context.currentTime),I.add(l(y,w)),g.exponentialRampToValueAtTime(y,w),A},linearRampToValueAtTime(y,w){return E===null&&I.flush(f.context.currentTime),I.add(i(y,w)),g.linearRampToValueAtTime(y,w),A},setTargetAtTime(y,w,m){return E===null&&I.flush(f.context.currentTime),I.add(s(y,w,m)),g.setTargetAtTime(y,w,m),A},setValueAtTime(y,w){return E===null&&I.flush(f.context.currentTime),I.add(u(y,w)),g.setValueAtTime(y,w),A},setValueCurveAtTime(y,w,m){const C=y instanceof Float32Array?y:new Float32Array(y);if(d!==null&&d.name==="webkitAudioContext"){const T=w+m,R=f.context.sampleRate,O=Math.ceil(w*R),_=Math.floor(T*R),k=_-O,M=new Float32Array(k);for(let D=0;D<k;D+=1){const W=(C.length-1)/m*((O+D)/R-w),Z=Math.floor(W),V=Math.ceil(W);M[D]=Z===V?C[Z]:(1-(W-Z))*C[Z]+(1-(V-W))*C[V]}E===null&&I.flush(f.context.currentTime),I.add(c(M,w,m)),g.setValueCurveAtTime(M,w,m);const b=_/R;b<T&&h(A,M[M.length-1],b),h(A,C[C.length-1],T)}else E===null&&I.flush(f.context.currentTime),I.add(c(C,w,m)),g.setValueCurveAtTime(C,w,m);return A}};return t.set(A,g),n.set(A,f),e(A,E),A},Lr=e=>({replay(n){for(const t of e)if(t.type==="exponentialRampToValue"){const{endTime:r,value:o}=t;n.exponentialRampToValueAtTime(o,r)}else if(t.type==="linearRampToValue"){const{endTime:r,value:o}=t;n.linearRampToValueAtTime(o,r)}else if(t.type==="setTarget"){const{startTime:r,target:o,timeConstant:a}=t;n.setTargetAtTime(o,r,a)}else if(t.type==="setValue"){const{startTime:r,value:o}=t;n.setValueAtTime(o,r)}else if(t.type==="setValueCurve"){const{duration:r,startTime:o,values:a}=t;n.setValueCurveAtTime(a,o,r)}else throw new Error("Can't apply an unknown automation.")}}),qr=(e,n,t,r,o,a,l,i,s,u,c,d,h,f,p,g,N,v,I,E)=>class extends p{constructor(y,w){super(y,w),this._nativeContext=y,this._audioWorklet=e===void 0?void 0:{addModule:(m,C)=>e(this,m,C)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new n(this)}createBiquadFilter(){return new o(this)}createBuffer(y,w,m){return new t({length:w,numberOfChannels:y,sampleRate:m})}createBufferSource(){return new r(this)}createChannelMerger(y=6){return new a(this,{numberOfInputs:y})}createChannelSplitter(y=6){return new l(this,{numberOfOutputs:y})}createConstantSource(){return new i(this)}createConvolver(){return new s(this)}createDelay(y=1){return new c(this,{maxDelayTime:y})}createDynamicsCompressor(){return new d(this)}createGain(){return new h(this)}createIIRFilter(y,w){return new f(this,{feedback:w,feedforward:y})}createOscillator(){return new g(this)}createPanner(){return new N(this)}createPeriodicWave(y,w,m={disableNormalization:!1}){return new v(this,P(S({},m),{imag:w,real:y}))}createStereoPanner(){return new I(this)}createWaveShaper(){return new E(this)}decodeAudioData(y,w,m){return u(this._nativeContext,y).then(C=>(typeof w=="function"&&w(C),C),C=>{throw typeof m=="function"&&m(C),C})}},Zr={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},Gr=(e,n,t,r,o,a,l,i)=>class extends e{constructor(u,c){const d=a(u),h=S(S({},Zr),c),f=o(d,h),p=l(d),g=p?t():null;super(u,!1,f,g),this._Q=n(this,p,f.Q,ee,te),this._detune=n(this,p,f.detune,1200*Math.log2(ee),-1200*Math.log2(ee)),this._frequency=n(this,p,f.frequency,u.sampleRate/2,0),this._gain=n(this,p,f.gain,40*Math.log10(ee),te),this._nativeBiquadFilterNode=f,i(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(u){this._nativeBiquadFilterNode.type=u}getFrequencyResponse(u,c,d){try{this._nativeBiquadFilterNode.getFrequencyResponse(u,c,d)}catch(h){throw h.code===11?r():h}if(u.length!==c.length||c.length!==d.length)throw r()}},Ur=(e,n,t,r,o)=>()=>{const a=new WeakMap,l=async(i,s,u)=>{let c=t(i);const d=J(c,s);if(!d){const h={Q:c.Q.value,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,detune:c.detune.value,frequency:c.frequency.value,gain:c.gain.value,type:c.type};c=n(s,h)}return a.set(s,c),d?(await e(s,i.Q,c.Q,u),await e(s,i.detune,c.detune,u),await e(s,i.frequency,c.frequency,u),await e(s,i.gain,c.gain,u)):(await r(s,i.Q,c.Q,u),await r(s,i.detune,c.detune,u),await r(s,i.frequency,c.frequency,u),await r(s,i.gain,c.gain,u)),await o(i,s,c,u),c};return{render(i,s,u){const c=a.get(s);return c!==void 0?Promise.resolve(c):l(i,s,u)}}},Xr=(e,n)=>(t,r)=>{const o=n.get(t);if(o!==void 0)return o;const a=e.get(t);if(a!==void 0)return a;try{const l=r();return l instanceof Promise?(e.set(t,l),l.catch(()=>!1).then(i=>(e.delete(t),n.set(t,i),i))):(n.set(t,l),l)}catch{return n.set(t,!1),!1}},Yr={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},jr=(e,n,t,r,o)=>class extends e{constructor(l,i){const s=r(l),u=S(S({},Yr),i),c=t(s,u),d=o(s)?n():null;super(l,!1,c,d)}},zr=(e,n,t)=>()=>{const r=new WeakMap,o=async(a,l,i)=>{let s=n(a);if(!J(s,l)){const c={channelCount:s.channelCount,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,numberOfInputs:s.numberOfInputs};s=e(l,c)}return r.set(l,s),await t(a,l,s,i),s};return{render(a,l,i){const s=r.get(l);return s!==void 0?Promise.resolve(s):o(a,l,i)}}},$r={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},Qr=(e,n,t,r,o,a)=>class extends e{constructor(i,s){const u=r(i),c=a(S(S({},$r),s)),d=t(u,c),h=o(u)?n():null;super(i,!1,d,h)}},Hr=(e,n,t)=>()=>{const r=new WeakMap,o=async(a,l,i)=>{let s=n(a);if(!J(s,l)){const c={channelCount:s.channelCount,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,numberOfOutputs:s.numberOfOutputs};s=e(l,c)}return r.set(l,s),await t(a,l,s,i),s};return{render(a,l,i){const s=r.get(l);return s!==void 0?Promise.resolve(s):o(a,l,i)}}},xr=e=>(n,t,r,o)=>e(t,n,r,o),Jr=e=>(n,t)=>{const r=e(n,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),o=n.createBuffer(1,2,44100);return r.buffer=o,r.loop=!0,r.connect(t),r.start(),()=>{r.stop(),r.disconnect(t)}},Kr={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},eo=(e,n,t,r,o,a,l)=>class extends e{constructor(s,u){const c=o(s),d=S(S({},Kr),u),h=r(c,d),f=a(c),p=f?t():null;super(s,!1,h,p),this._constantSourceNodeRenderer=p,this._nativeConstantSourceNode=h,this._offset=n(this,f,h.offset,ee,te),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(s){const u=typeof s=="function"?l(this,s):null;this._nativeConstantSourceNode.onended=u;const c=this._nativeConstantSourceNode.onended;this._onended=c!==null&&c===u?s:c}start(s=0){if(this._nativeConstantSourceNode.start(s),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=s),this.context.state!=="closed"){Me(this);const u=()=>{this._nativeConstantSourceNode.removeEventListener("ended",u),ie(this)&&Fe(this)};this._nativeConstantSourceNode.addEventListener("ended",u)}}stop(s=0){this._nativeConstantSourceNode.stop(s),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=s)}},to=(e,n,t,r,o)=>()=>{const a=new WeakMap;let l=null,i=null;const s=async(u,c,d)=>{let h=t(u);const f=J(h,c);if(!f){const p={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,offset:h.offset.value};h=n(c,p),l!==null&&h.start(l),i!==null&&h.stop(i)}return a.set(c,h),f?await e(c,u.offset,h.offset,d):await r(c,u.offset,h.offset,d),await o(u,c,h,d),h};return{set start(u){l=u},set stop(u){i=u},render(u,c,d){const h=a.get(c);return h!==void 0?Promise.resolve(h):s(u,c,d)}}},no=e=>n=>(e[0]=n,e[0]),ro={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},oo=(e,n,t,r,o,a)=>class extends e{constructor(i,s){const u=r(i),c=S(S({},ro),s),d=t(u,c),f=o(u)?n():null;super(i,!1,d,f),this._isBufferNullified=!1,this._nativeConvolverNode=d,c.buffer!==null&&a(this,c.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(i){if(this._nativeConvolverNode.buffer=i,i===null&&this._nativeConvolverNode.buffer!==null){const s=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=s.createBuffer(1,1,44100),this._isBufferNullified=!0,a(this,0)}else this._isBufferNullified=!1,a(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(i){this._nativeConvolverNode.normalize=i}},so=(e,n,t)=>()=>{const r=new WeakMap,o=async(a,l,i)=>{let s=n(a);if(!J(s,l)){const c={buffer:s.buffer,channelCount:s.channelCount,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,disableNormalization:!s.normalize};s=e(l,c)}return r.set(l,s),Te(s)?await t(a,l,s.inputs[0],i):await t(a,l,s,i),s};return{render(a,l,i){const s=r.get(l);return s!==void 0?Promise.resolve(s):o(a,l,i)}}},ao=()=>new DOMException("","DataCloneError"),Gt=e=>{const{port1:n,port2:t}=new MessageChannel;return new Promise(r=>{const o=()=>{t.onmessage=null,n.close(),t.close(),r()};t.onmessage=()=>o();try{n.postMessage(e,[e])}finally{o()}})},co=(e,n,t,r,o,a,l,i,s,u,c)=>(d,h)=>{const f=l(d)?d:a(d);if(o.has(h)){const p=t();return Promise.reject(p)}try{o.add(h)}catch{}return n(s,()=>s(f))?f.decodeAudioData(h).then(p=>(Gt(h).catch(()=>{}),n(i,()=>i(p))||c(p),e.add(p),p)):new Promise((p,g)=>{const N=async()=>{try{await Gt(h)}catch{}},v=I=>{g(I),N()};try{f.decodeAudioData(h,I=>{typeof I.copyFromChannel!="function"&&(u(I),on(I)),e.add(I),N().then(()=>p(I))},I=>{v(I===null?r():I)})}catch(I){v(I)}})},io=(e,n,t,r,o,a,l,i)=>(s,u)=>{const c=n.get(s);if(c===void 0)throw new Error("Missing the expected cycle count.");const d=a(s.context),h=i(d);if(c===u){if(n.delete(s),!h&&l(s)){const f=r(s),{outputs:p}=t(s);for(const g of p)if(ke(g)){const N=r(g[0]);e(f,N,g[1],g[2])}else{const N=o(g[0]);f.connect(N,g[1])}}}else n.set(s,c-u)},lo={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},uo=(e,n,t,r,o,a,l)=>class extends e{constructor(s,u){const c=o(s),d=S(S({},lo),u),h=r(c,d),f=a(c),p=f?t(d.maxDelayTime):null;super(s,!1,h,p),this._delayTime=n(this,f,h.delayTime),l(this,d.maxDelayTime)}get delayTime(){return this._delayTime}},ho=(e,n,t,r,o)=>a=>{const l=new WeakMap,i=async(s,u,c)=>{let d=t(s);const h=J(d,u);if(!h){const f={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,delayTime:d.delayTime.value,maxDelayTime:a};d=n(u,f)}return l.set(u,d),h?await e(u,s.delayTime,d.delayTime,c):await r(u,s.delayTime,d.delayTime,c),await o(s,u,d,c),d};return{render(s,u,c){const d=l.get(u);return d!==void 0?Promise.resolve(d):i(s,u,c)}}},fo=e=>(n,t,r,o)=>e(n[o],a=>a[0]===t&&a[1]===r),po=e=>"delayTime"in e,mo=(e,n,t)=>function r(o,a){const l=je(a)?a:t(e,a);if(po(l))return[];if(o[0]===l)return[o];if(o.includes(l))return[];const{outputs:i}=n(l);return Array.from(i).map(s=>r([...o,l],s[0])).reduce((s,u)=>s.concat(u),[])},go={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},No=(e,n,t,r,o,a,l,i)=>class extends e{constructor(u,c){const d=a(u),h=S(S({},go),c),f=r(d,h),p=l(d),g=p?t():null;super(u,!1,f,g),this._attack=n(this,p,f.attack),this._knee=n(this,p,f.knee),this._nativeDynamicsCompressorNode=f,this._ratio=n(this,p,f.ratio),this._release=n(this,p,f.release),this._threshold=n(this,p,f.threshold),i(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(u){const c=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=u,u>2)throw this._nativeDynamicsCompressorNode.channelCount=c,o()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(u){const c=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=u,u==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=c,o()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},vo=(e,n,t,r,o)=>()=>{const a=new WeakMap,l=async(i,s,u)=>{let c=t(i);const d=J(c,s);if(!d){const h={attack:c.attack.value,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,knee:c.knee.value,ratio:c.ratio.value,release:c.release.value,threshold:c.threshold.value};c=n(s,h)}return a.set(s,c),d?(await e(s,i.attack,c.attack,u),await e(s,i.knee,c.knee,u),await e(s,i.ratio,c.ratio,u),await e(s,i.release,c.release,u),await e(s,i.threshold,c.threshold,u)):(await r(s,i.attack,c.attack,u),await r(s,i.knee,c.knee,u),await r(s,i.ratio,c.ratio,u),await r(s,i.release,c.release,u),await r(s,i.threshold,c.threshold,u)),await o(i,s,c,u),c};return{render(i,s,u){const c=a.get(s);return c!==void 0?Promise.resolve(c):l(i,s,u)}}},Co=()=>new DOMException("","EncodingError"),yo=e=>n=>new Promise((t,r)=>{if(e===null){r(new SyntaxError);return}const o=e.document.head;if(o===null)r(new SyntaxError);else{const a=e.document.createElement("script"),l=new Blob([n],{type:"application/javascript"}),i=URL.createObjectURL(l),s=e.onerror,u=()=>{e.onerror=s,URL.revokeObjectURL(i)};e.onerror=(c,d,h,f,p)=>{if(d===i||d===e.location.href&&h===1&&f===1)return u(),r(p),!1;if(s!==null)return s(c,d,h,f,p)},a.onerror=()=>{u(),r(new SyntaxError)},a.onload=()=>{u(),t()},a.src=i,a.type="module",o.appendChild(a)}}),wo=e=>class{constructor(t){this._nativeEventTarget=t,this._listeners=new WeakMap}addEventListener(t,r,o){if(r!==null){let a=this._listeners.get(r);a===void 0&&(a=e(this,r),typeof r=="function"&&this._listeners.set(r,a)),this._nativeEventTarget.addEventListener(t,a,o)}}dispatchEvent(t){return this._nativeEventTarget.dispatchEvent(t)}removeEventListener(t,r,o){const a=r===null?void 0:this._listeners.get(r);this._nativeEventTarget.removeEventListener(t,a===void 0?null:a,o)}},_o=e=>(n,t,r)=>{Object.defineProperties(e,{currentFrame:{configurable:!0,get(){return Math.round(n*t)}},currentTime:{configurable:!0,get(){return n}}});try{return r()}finally{e!==null&&(delete e.currentFrame,delete e.currentTime)}},Io=e=>async n=>{try{const t=await fetch(n);if(t.ok)return[await t.text(),t.url]}catch{}throw e()},So={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},Mo=(e,n,t,r,o,a)=>class extends e{constructor(i,s){const u=o(i),c=S(S({},So),s),d=r(u,c),h=a(u),f=h?t():null;super(i,!1,d,f),this._gain=n(this,h,d.gain,ee,te)}get gain(){return this._gain}},To=(e,n,t,r,o)=>()=>{const a=new WeakMap,l=async(i,s,u)=>{let c=t(i);const d=J(c,s);if(!d){const h={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,gain:c.gain.value};c=n(s,h)}return a.set(s,c),d?await e(s,i.gain,c.gain,u):await r(s,i.gain,c.gain,u),await o(i,s,c,u),c};return{render(i,s,u){const c=a.get(s);return c!==void 0?Promise.resolve(c):l(i,s,u)}}},Ao=e=>n=>{const t=e(n);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return t.renderer},Eo=e=>n=>{var t;return(t=e.get(n))!==null&&t!==void 0?t:0},bo=e=>n=>{const t=e(n);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return t.renderer},x=()=>new DOMException("","InvalidStateError"),Do=e=>n=>{const t=e.get(n);if(t===void 0)throw x();return t},Oo=(e,n)=>t=>{let r=e.get(t);if(r!==void 0)return r;if(n===null)throw new Error("Missing the native OfflineAudioContext constructor.");return r=new n(1,1,44100),e.set(t,r),r},He=()=>new DOMException("","InvalidAccessError"),Ro=e=>{e.getFrequencyResponse=(n=>(t,r,o)=>{if(t.length!==r.length||r.length!==o.length)throw He();return n.call(e,t,r,o)})(e.getFrequencyResponse)},Fo={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},Po=(e,n,t,r,o,a)=>class extends e{constructor(i,s){const u=r(i),c=o(u),d=S(S({},Fo),s),h=n(u,c?null:i.baseLatency,d),f=c?t(d.feedback,d.feedforward):null;super(i,!1,h,f),Ro(h),this._nativeIIRFilterNode=h,a(this,1)}getFrequencyResponse(i,s,u){return this._nativeIIRFilterNode.getFrequencyResponse(i,s,u)}},un=(e,n,t,r,o,a,l,i,s,u,c)=>{const d=u.length;let h=i;for(let f=0;f<d;f+=1){let p=t[0]*u[f];for(let g=1;g<o;g+=1){const N=h-g&s-1;p+=t[g]*a[N],p-=e[g]*l[N]}for(let g=o;g<r;g+=1)p+=t[g]*a[h-g&s-1];for(let g=o;g<n;g+=1)p-=e[g]*l[h-g&s-1];a[h]=u[f],l[h]=p,h=h+1&s-1,c[f]=p}return h},ko=(e,n,t,r)=>{const o=t instanceof Float64Array?t:new Float64Array(t),a=r instanceof Float64Array?r:new Float64Array(r),l=o.length,i=a.length,s=Math.min(l,i);if(o[0]!==1){for(let p=0;p<l;p+=1)a[p]/=o[0];for(let p=1;p<i;p+=1)o[p]/=o[0]}const u=32,c=new Float32Array(u),d=new Float32Array(u),h=n.createBuffer(e.numberOfChannels,e.length,e.sampleRate),f=e.numberOfChannels;for(let p=0;p<f;p+=1){const g=e.getChannelData(p),N=h.getChannelData(p);c.fill(0),d.fill(0),un(o,l,a,i,s,c,d,0,u,g,N)}return h},Wo=(e,n,t,r,o)=>(a,l)=>{const i=new WeakMap;let s=null;const u=async(c,d,h)=>{let f=null,p=n(c);const g=J(p,d);if(d.createIIRFilter===void 0?f=e(d,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):g||(p=d.createIIRFilter(l,a)),i.set(d,f===null?p:f),f!==null){if(s===null){if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");const v=new t(c.context.destination.channelCount,c.context.length,d.sampleRate);s=(async()=>{await r(c,v,v.destination,h);const I=await o(v);return ko(I,d,a,l)})()}const N=await s;return f.buffer=N,f.start(0),f}return await r(c,d,p,h),p};return{render(c,d,h){const f=i.get(d);return f!==void 0?Promise.resolve(f):u(c,d,h)}}},Vo=(e,n,t,r,o,a)=>l=>(i,s)=>{const u=e.get(i);if(u===void 0){if(!l&&a(i)){const c=r(i),{outputs:d}=t(i);for(const h of d)if(ke(h)){const f=r(h[0]);n(c,f,h[1],h[2])}else{const f=o(h[0]);c.disconnect(f,h[1])}}e.set(i,s)}else e.set(i,u+s)},Bo=e=>n=>e!==null&&n instanceof e,Lo=e=>n=>e!==null&&typeof e.AudioNode=="function"&&n instanceof e.AudioNode,qo=e=>n=>e!==null&&typeof e.AudioParam=="function"&&n instanceof e.AudioParam,Zo=(e,n)=>t=>e(t)||n(t),Go=e=>n=>e!==null&&n instanceof e,Uo=e=>e!==null&&e.isSecureContext,Xo=(e,n,t,r)=>class extends e{constructor(a,l){const i=t(a),s=n(i,l);if(r(i))throw TypeError();super(a,!0,s,null),this._nativeMediaElementAudioSourceNode=s}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},Yo={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},jo=(e,n,t,r)=>class extends e{constructor(a,l){const i=t(a);if(r(i))throw new TypeError;const s=S(S({},Yo),l),u=n(i,s);super(a,!1,u,null),this._nativeMediaStreamAudioDestinationNode=u}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},zo=(e,n,t,r)=>class extends e{constructor(a,l){const i=t(a),s=n(i,l);if(r(i))throw new TypeError;super(a,!0,s,null),this._nativeMediaStreamAudioSourceNode=s}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},$o=(e,n,t)=>class extends e{constructor(o,a){const l=t(o),i=n(l,a);super(o,!0,i,null)}},Qo=(e,n,t,r,o,a)=>class extends t{constructor(i,s){super(i),this._nativeContext=i,Kt.set(this,i),r(i)&&o.set(i,new Set),this._destination=new e(this,s),this._listener=n(this,i),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(i){const s=typeof i=="function"?a(this,i):null;this._nativeContext.onstatechange=s;const u=this._nativeContext.onstatechange;this._onstatechange=u!==null&&u===s?i:u}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},gt=e=>{const n=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const t=e.decodeAudioData(n.buffer,()=>{});return t===void 0?!1:(t.catch(()=>{}),!0)}catch{}return!1},Ho=(e,n)=>(t,r,o)=>{const a=new Set;return t.connect=(l=>(i,s=0,u=0)=>{const c=a.size===0;if(n(i))return l.call(t,i,s,u),e(a,[i,s,u],d=>d[0]===i&&d[1]===s&&d[2]===u,!0),c&&r(),i;l.call(t,i,s),e(a,[i,s],d=>d[0]===i&&d[1]===s,!0),c&&r()})(t.connect),t.disconnect=(l=>(i,s,u)=>{const c=a.size>0;if(i===void 0)l.apply(t),a.clear();else if(typeof i=="number"){l.call(t,i);for(const h of a)h[1]===i&&a.delete(h)}else{n(i)?l.call(t,i,s,u):l.call(t,i,s);for(const h of a)h[0]===i&&(s===void 0||h[1]===s)&&(u===void 0||h[2]===u)&&a.delete(h)}const d=a.size===0;c&&d&&o()})(t.disconnect),t},U=(e,n,t)=>{const r=n[t];r!==void 0&&r!==e[t]&&(e[t]=r)},Q=(e,n)=>{U(e,n,"channelCount"),U(e,n,"channelCountMode"),U(e,n,"channelInterpretation")},Ut=e=>typeof e.getFloatTimeDomainData=="function",xo=e=>{e.getFloatTimeDomainData=n=>{const t=new Uint8Array(n.length);e.getByteTimeDomainData(t);const r=Math.max(t.length,e.fftSize);for(let o=0;o<r;o+=1)n[o]=(t[o]-128)*.0078125;return n}},Jo=(e,n)=>(t,r)=>{const o=t.createAnalyser();if(Q(o,r),!(r.maxDecibels>r.minDecibels))throw n();return U(o,r,"fftSize"),U(o,r,"maxDecibels"),U(o,r,"minDecibels"),U(o,r,"smoothingTimeConstant"),e(Ut,()=>Ut(o))||xo(o),o},Ko=e=>e===null?null:e.hasOwnProperty("AudioBuffer")?e.AudioBuffer:null,j=(e,n,t)=>{const r=n[t];r!==void 0&&r!==e[t].value&&(e[t].value=r)},es=e=>{e.start=(n=>{let t=!1;return(r=0,o=0,a)=>{if(t)throw x();n.call(e,r,o,a),t=!0}})(e.start)},yt=e=>{e.start=(n=>(t=0,r=0,o)=>{if(typeof o=="number"&&o<0||r<0||t<0)throw new RangeError("The parameters can't be negative.");n.call(e,t,r,o)})(e.start)},wt=e=>{e.stop=(n=>(t=0)=>{if(t<0)throw new RangeError("The parameter can't be negative.");n.call(e,t)})(e.stop)},ts=(e,n,t,r,o,a,l,i,s,u,c)=>(d,h)=>{const f=d.createBufferSource();return Q(f,h),j(f,h,"playbackRate"),U(f,h,"buffer"),U(f,h,"loop"),U(f,h,"loopEnd"),U(f,h,"loopStart"),n(t,()=>t(d))||es(f),n(r,()=>r(d))||s(f),n(o,()=>o(d))||u(f,d),n(a,()=>a(d))||yt(f),n(l,()=>l(d))||c(f,d),n(i,()=>i(d))||wt(f),e(d,f),f},ns=e=>e===null?null:e.hasOwnProperty("AudioContext")?e.AudioContext:e.hasOwnProperty("webkitAudioContext")?e.webkitAudioContext:null,rs=(e,n)=>(t,r,o)=>{const a=t.destination;if(a.channelCount!==r)try{a.channelCount=r}catch{}o&&a.channelCountMode!=="explicit"&&(a.channelCountMode="explicit"),a.maxChannelCount===0&&Object.defineProperty(a,"maxChannelCount",{value:r});const l=e(t,{channelCount:r,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,gain:1});return n(l,"channelCount",i=>()=>i.call(l),i=>s=>{i.call(l,s);try{a.channelCount=s}catch(u){if(s>a.maxChannelCount)throw u}}),n(l,"channelCountMode",i=>()=>i.call(l),i=>s=>{i.call(l,s),a.channelCountMode=s}),n(l,"channelInterpretation",i=>()=>i.call(l),i=>s=>{i.call(l,s),a.channelInterpretation=s}),Object.defineProperty(l,"maxChannelCount",{get:()=>a.maxChannelCount}),l.connect(a),l},os=e=>e===null?null:e.hasOwnProperty("AudioWorkletNode")?e.AudioWorkletNode:null,ss=(e,n)=>e===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(e*n))))),dn=(e,n)=>{const t=e.createBiquadFilter();return Q(t,n),j(t,n,"Q"),j(t,n,"detune"),j(t,n,"frequency"),j(t,n,"gain"),U(t,n,"type"),t},as=(e,n)=>(t,r)=>{const o=t.createChannelMerger(r.numberOfInputs);return e!==null&&e.name==="webkitAudioContext"&&n(t,o),Q(o,r),o},cs=e=>{const n=e.numberOfOutputs;Object.defineProperty(e,"channelCount",{get:()=>n,set:t=>{if(t!==n)throw x()}}),Object.defineProperty(e,"channelCountMode",{get:()=>"explicit",set:t=>{if(t!=="explicit")throw x()}}),Object.defineProperty(e,"channelInterpretation",{get:()=>"discrete",set:t=>{if(t!=="discrete")throw x()}})},_t=(e,n)=>{const t=e.createChannelSplitter(n.numberOfOutputs);return Q(t,n),cs(t),t},is=(e,n,t,r,o)=>(a,l)=>{if(a.createConstantSource===void 0)return t(a,l);const i=a.createConstantSource();return Q(i,l),j(i,l,"offset"),n(r,()=>r(a))||yt(i),n(o,()=>o(a))||wt(i),e(a,i),i},Ae=(e,n)=>(e.connect=n.connect.bind(n),e.disconnect=n.disconnect.bind(n),e),ls=(e,n,t,r)=>(o,i)=>{var s=i,{offset:a}=s,l=De(s,["offset"]);const u=o.createBuffer(1,2,44100),c=n(o,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),d=t(o,P(S({},l),{gain:a})),h=u.getChannelData(0);h[0]=1,h[1]=1,c.buffer=u,c.loop=!0;const f={get bufferSize(){},get channelCount(){return d.channelCount},set channelCount(N){d.channelCount=N},get channelCountMode(){return d.channelCountMode},set channelCountMode(N){d.channelCountMode=N},get channelInterpretation(){return d.channelInterpretation},set channelInterpretation(N){d.channelInterpretation=N},get context(){return d.context},get inputs(){return[]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return d.numberOfOutputs},get offset(){return d.gain},get onended(){return c.onended},set onended(N){c.onended=N},addEventListener(...N){return c.addEventListener(N[0],N[1],N[2])},dispatchEvent(...N){return c.dispatchEvent(N[0])},removeEventListener(...N){return c.removeEventListener(N[0],N[1],N[2])},start(N=0){c.start.call(c,N)},stop(N=0){c.stop.call(c,N)}},p=()=>c.connect(d),g=()=>c.disconnect(d);return e(o,c),r(Ae(f,d),p,g)},us=(e,n)=>(t,r)=>{const o=t.createConvolver();if(Q(o,r),r.disableNormalization===o.normalize&&(o.normalize=!r.disableNormalization),U(o,r,"buffer"),r.channelCount>2||(n(o,"channelCount",a=>()=>a.call(o),a=>l=>{if(l>2)throw e();return a.call(o,l)}),r.channelCountMode==="max"))throw e();return n(o,"channelCountMode",a=>()=>a.call(o),a=>l=>{if(l==="max")throw e();return a.call(o,l)}),o},hn=(e,n)=>{const t=e.createDelay(n.maxDelayTime);return Q(t,n),j(t,n,"delayTime"),t},ds=e=>(n,t)=>{const r=n.createDynamicsCompressor();if(Q(r,t),t.channelCount>2||t.channelCountMode==="max")throw e();return j(r,t,"attack"),j(r,t,"knee"),j(r,t,"ratio"),j(r,t,"release"),j(r,t,"threshold"),r},oe=(e,n)=>{const t=e.createGain();return Q(t,n),j(t,n,"gain"),t},hs=e=>(n,t,r)=>{if(n.createIIRFilter===void 0)return e(n,t,r);const o=n.createIIRFilter(r.feedforward,r.feedback);return Q(o,r),o};function fs(e,n){const t=n[0]*n[0]+n[1]*n[1];return[(e[0]*n[0]+e[1]*n[1])/t,(e[1]*n[0]-e[0]*n[1])/t]}function ps(e,n){return[e[0]*n[0]-e[1]*n[1],e[0]*n[1]+e[1]*n[0]]}function Xt(e,n){let t=[0,0];for(let r=e.length-1;r>=0;r-=1)t=ps(t,n),t[0]+=e[r];return t}const ms=(e,n,t,r)=>(o,a,{channelCount:l,channelCountMode:i,channelInterpretation:s,feedback:u,feedforward:c})=>{const d=ss(a,o.sampleRate),h=u instanceof Float64Array?u:new Float64Array(u),f=c instanceof Float64Array?c:new Float64Array(c),p=h.length,g=f.length,N=Math.min(p,g);if(p===0||p>20)throw r();if(h[0]===0)throw n();if(g===0||g>20)throw r();if(f[0]===0)throw n();if(h[0]!==1){for(let C=0;C<g;C+=1)f[C]/=h[0];for(let C=1;C<p;C+=1)h[C]/=h[0]}const v=t(o,d,l,l);v.channelCount=l,v.channelCountMode=i,v.channelInterpretation=s;const I=32,E=[],A=[],y=[];for(let C=0;C<l;C+=1){E.push(0);const T=new Float32Array(I),R=new Float32Array(I);T.fill(0),R.fill(0),A.push(T),y.push(R)}v.onaudioprocess=C=>{const T=C.inputBuffer,R=C.outputBuffer,O=T.numberOfChannels;for(let _=0;_<O;_+=1){const k=T.getChannelData(_),M=R.getChannelData(_);E[_]=un(h,p,f,g,N,A[_],y[_],E[_],I,k,M)}};const w=o.sampleRate/2;return Ae({get bufferSize(){return d},get channelCount(){return v.channelCount},set channelCount(C){v.channelCount=C},get channelCountMode(){return v.channelCountMode},set channelCountMode(C){v.channelCountMode=C},get channelInterpretation(){return v.channelInterpretation},set channelInterpretation(C){v.channelInterpretation=C},get context(){return v.context},get inputs(){return[v]},get numberOfInputs(){return v.numberOfInputs},get numberOfOutputs(){return v.numberOfOutputs},addEventListener(...C){return v.addEventListener(C[0],C[1],C[2])},dispatchEvent(...C){return v.dispatchEvent(C[0])},getFrequencyResponse(C,T,R){if(C.length!==T.length||T.length!==R.length)throw e();const O=C.length;for(let _=0;_<O;_+=1){const k=-Math.PI*(C[_]/w),M=[Math.cos(k),Math.sin(k)],b=Xt(f,M),D=Xt(h,M),W=fs(b,D);T[_]=Math.sqrt(W[0]*W[0]+W[1]*W[1]),R[_]=Math.atan2(W[1],W[0])}},removeEventListener(...C){return v.removeEventListener(C[0],C[1],C[2])}},v)},gs=(e,n)=>e.createMediaElementSource(n.mediaElement),Ns=(e,n)=>{const t=e.createMediaStreamDestination();return Q(t,n),t.numberOfOutputs===1&&Object.defineProperty(t,"numberOfOutputs",{get:()=>0}),t},vs=(e,{mediaStream:n})=>{const t=n.getAudioTracks();t.sort((a,l)=>a.id<l.id?-1:a.id>l.id?1:0);const r=t.slice(0,1),o=e.createMediaStreamSource(new MediaStream(r));return Object.defineProperty(o,"mediaStream",{value:n}),o},Cs=(e,n)=>(t,{mediaStreamTrack:r})=>{if(typeof t.createMediaStreamTrackSource=="function")return t.createMediaStreamTrackSource(r);const o=new MediaStream([r]),a=t.createMediaStreamSource(o);if(r.kind!=="audio")throw e();if(n(t))throw new TypeError;return a},ys=e=>e===null?null:e.hasOwnProperty("OfflineAudioContext")?e.OfflineAudioContext:e.hasOwnProperty("webkitOfflineAudioContext")?e.webkitOfflineAudioContext:null,ws=(e,n,t,r,o,a)=>(l,i)=>{const s=l.createOscillator();return Q(s,i),j(s,i,"detune"),j(s,i,"frequency"),i.periodicWave!==void 0?s.setPeriodicWave(i.periodicWave):U(s,i,"type"),n(t,()=>t(l))||yt(s),n(r,()=>r(l))||a(s,l),n(o,()=>o(l))||wt(s),e(l,s),s},_s=e=>(n,t)=>{const r=n.createPanner();return r.orientationX===void 0?e(n,t):(Q(r,t),j(r,t,"orientationX"),j(r,t,"orientationY"),j(r,t,"orientationZ"),j(r,t,"positionX"),j(r,t,"positionY"),j(r,t,"positionZ"),U(r,t,"coneInnerAngle"),U(r,t,"coneOuterAngle"),U(r,t,"coneOuterGain"),U(r,t,"distanceModel"),U(r,t,"maxDistance"),U(r,t,"panningModel"),U(r,t,"refDistance"),U(r,t,"rolloffFactor"),r)},Is=(e,n,t,r,o,a,l,i,s,u)=>(c,R)=>{var O=R,{coneInnerAngle:d,coneOuterAngle:h,coneOuterGain:f,distanceModel:p,maxDistance:g,orientationX:N,orientationY:v,orientationZ:I,panningModel:E,positionX:A,positionY:y,positionZ:w,refDistance:m,rolloffFactor:C}=O,T=De(O,["coneInnerAngle","coneOuterAngle","coneOuterGain","distanceModel","maxDistance","orientationX","orientationY","orientationZ","panningModel","positionX","positionY","positionZ","refDistance","rolloffFactor"]);const _=c.createPanner();if(T.channelCount>2||T.channelCountMode==="max")throw l();Q(_,T);const k={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},M=t(c,P(S({},k),{channelInterpretation:"speakers",numberOfInputs:6})),b=r(c,P(S({},T),{gain:1})),D=r(c,P(S({},k),{gain:1})),W=r(c,P(S({},k),{gain:0})),Z=r(c,P(S({},k),{gain:0})),V=r(c,P(S({},k),{gain:0})),L=r(c,P(S({},k),{gain:0})),Y=r(c,P(S({},k),{gain:0})),z=o(c,256,6,1),K=a(c,P(S({},k),{curve:new Float32Array([1,1]),oversample:"none"}));let ye=[N,v,I],we=[A,y,w];const _e=new Float32Array(1);z.onaudioprocess=({inputBuffer:F})=>{const nt=[s(F,_e,0),s(F,_e,1),s(F,_e,2)];nt.some((ot,st)=>ot!==ye[st])&&(_.setOrientation(...nt),ye=nt);const rt=[s(F,_e,3),s(F,_e,4),s(F,_e,5)];rt.some((ot,st)=>ot!==we[st])&&(_.setPosition(...rt),we=rt)},Object.defineProperty(W.gain,"defaultValue",{get:()=>0}),Object.defineProperty(Z.gain,"defaultValue",{get:()=>0}),Object.defineProperty(V.gain,"defaultValue",{get:()=>0}),Object.defineProperty(L.gain,"defaultValue",{get:()=>0}),Object.defineProperty(Y.gain,"defaultValue",{get:()=>0});const B={get bufferSize(){},get channelCount(){return _.channelCount},set channelCount(F){if(F>2)throw l();b.channelCount=F,_.channelCount=F},get channelCountMode(){return _.channelCountMode},set channelCountMode(F){if(F==="max")throw l();b.channelCountMode=F,_.channelCountMode=F},get channelInterpretation(){return _.channelInterpretation},set channelInterpretation(F){b.channelInterpretation=F,_.channelInterpretation=F},get coneInnerAngle(){return _.coneInnerAngle},set coneInnerAngle(F){_.coneInnerAngle=F},get coneOuterAngle(){return _.coneOuterAngle},set coneOuterAngle(F){_.coneOuterAngle=F},get coneOuterGain(){return _.coneOuterGain},set coneOuterGain(F){if(F<0||F>1)throw n();_.coneOuterGain=F},get context(){return _.context},get distanceModel(){return _.distanceModel},set distanceModel(F){_.distanceModel=F},get inputs(){return[b]},get maxDistance(){return _.maxDistance},set maxDistance(F){if(F<0)throw new RangeError;_.maxDistance=F},get numberOfInputs(){return _.numberOfInputs},get numberOfOutputs(){return _.numberOfOutputs},get orientationX(){return D.gain},get orientationY(){return W.gain},get orientationZ(){return Z.gain},get panningModel(){return _.panningModel},set panningModel(F){_.panningModel=F},get positionX(){return V.gain},get positionY(){return L.gain},get positionZ(){return Y.gain},get refDistance(){return _.refDistance},set refDistance(F){if(F<0)throw new RangeError;_.refDistance=F},get rolloffFactor(){return _.rolloffFactor},set rolloffFactor(F){if(F<0)throw new RangeError;_.rolloffFactor=F},addEventListener(...F){return b.addEventListener(F[0],F[1],F[2])},dispatchEvent(...F){return b.dispatchEvent(F[0])},removeEventListener(...F){return b.removeEventListener(F[0],F[1],F[2])}};d!==B.coneInnerAngle&&(B.coneInnerAngle=d),h!==B.coneOuterAngle&&(B.coneOuterAngle=h),f!==B.coneOuterGain&&(B.coneOuterGain=f),p!==B.distanceModel&&(B.distanceModel=p),g!==B.maxDistance&&(B.maxDistance=g),N!==B.orientationX.value&&(B.orientationX.value=N),v!==B.orientationY.value&&(B.orientationY.value=v),I!==B.orientationZ.value&&(B.orientationZ.value=I),E!==B.panningModel&&(B.panningModel=E),A!==B.positionX.value&&(B.positionX.value=A),y!==B.positionY.value&&(B.positionY.value=y),w!==B.positionZ.value&&(B.positionZ.value=w),m!==B.refDistance&&(B.refDistance=m),C!==B.rolloffFactor&&(B.rolloffFactor=C),(ye[0]!==1||ye[1]!==0||ye[2]!==0)&&_.setOrientation(...ye),(we[0]!==0||we[1]!==0||we[2]!==0)&&_.setPosition(...we);const Ln=()=>{b.connect(_),e(b,K,0,0),K.connect(D).connect(M,0,0),K.connect(W).connect(M,0,1),K.connect(Z).connect(M,0,2),K.connect(V).connect(M,0,3),K.connect(L).connect(M,0,4),K.connect(Y).connect(M,0,5),M.connect(z).connect(c.destination)},qn=()=>{b.disconnect(_),i(b,K,0,0),K.disconnect(D),D.disconnect(M),K.disconnect(W),W.disconnect(M),K.disconnect(Z),Z.disconnect(M),K.disconnect(V),V.disconnect(M),K.disconnect(L),L.disconnect(M),K.disconnect(Y),Y.disconnect(M),M.disconnect(z),z.disconnect(c.destination)};return u(Ae(B,_),Ln,qn)},Ss=e=>(n,{disableNormalization:t,imag:r,real:o})=>{const a=r instanceof Float32Array?r:new Float32Array(r),l=o instanceof Float32Array?o:new Float32Array(o),i=n.createPeriodicWave(l,a,{disableNormalization:t});if(Array.from(r).length<2)throw e();return i},xe=(e,n,t,r)=>e.createScriptProcessor(n,t,r),Ms=(e,n)=>(t,r)=>{const o=r.channelCountMode;if(o==="clamped-max")throw n();if(t.createStereoPanner===void 0)return e(t,r);const a=t.createStereoPanner();return Q(a,r),j(a,r,"pan"),Object.defineProperty(a,"channelCountMode",{get:()=>o,set:l=>{if(l!==o)throw n()}}),a},Ts=(e,n,t,r,o,a)=>{const i=new Float32Array([1,1]),s=Math.PI/2,u={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},c=P(S({},u),{oversample:"none"}),d=(p,g,N,v)=>{const I=new Float32Array(16385),E=new Float32Array(16385);for(let T=0;T<16385;T+=1){const R=T/16384*s;I[T]=Math.cos(R),E[T]=Math.sin(R)}const A=t(p,P(S({},u),{gain:0})),y=r(p,P(S({},c),{curve:I})),w=r(p,P(S({},c),{curve:i})),m=t(p,P(S({},u),{gain:0})),C=r(p,P(S({},c),{curve:E}));return{connectGraph(){g.connect(A),g.connect(w.inputs===void 0?w:w.inputs[0]),g.connect(m),w.connect(N),N.connect(y.inputs===void 0?y:y.inputs[0]),N.connect(C.inputs===void 0?C:C.inputs[0]),y.connect(A.gain),C.connect(m.gain),A.connect(v,0,0),m.connect(v,0,1)},disconnectGraph(){g.disconnect(A),g.disconnect(w.inputs===void 0?w:w.inputs[0]),g.disconnect(m),w.disconnect(N),N.disconnect(y.inputs===void 0?y:y.inputs[0]),N.disconnect(C.inputs===void 0?C:C.inputs[0]),y.disconnect(A.gain),C.disconnect(m.gain),A.disconnect(v,0,0),m.disconnect(v,0,1)}}},h=(p,g,N,v)=>{const I=new Float32Array(16385),E=new Float32Array(16385),A=new Float32Array(16385),y=new Float32Array(16385),w=Math.floor(16385/2);for(let W=0;W<16385;W+=1)if(W>w){const Z=(W-w)/(16384-w)*s;I[W]=Math.cos(Z),E[W]=Math.sin(Z),A[W]=0,y[W]=1}else{const Z=W/(16384-w)*s;I[W]=1,E[W]=0,A[W]=Math.cos(Z),y[W]=Math.sin(Z)}const m=n(p,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),C=t(p,P(S({},u),{gain:0})),T=r(p,P(S({},c),{curve:I})),R=t(p,P(S({},u),{gain:0})),O=r(p,P(S({},c),{curve:E})),_=r(p,P(S({},c),{curve:i})),k=t(p,P(S({},u),{gain:0})),M=r(p,P(S({},c),{curve:A})),b=t(p,P(S({},u),{gain:0})),D=r(p,P(S({},c),{curve:y}));return{connectGraph(){g.connect(m),g.connect(_.inputs===void 0?_:_.inputs[0]),m.connect(C,0),m.connect(R,0),m.connect(k,1),m.connect(b,1),_.connect(N),N.connect(T.inputs===void 0?T:T.inputs[0]),N.connect(O.inputs===void 0?O:O.inputs[0]),N.connect(M.inputs===void 0?M:M.inputs[0]),N.connect(D.inputs===void 0?D:D.inputs[0]),T.connect(C.gain),O.connect(R.gain),M.connect(k.gain),D.connect(b.gain),C.connect(v,0,0),k.connect(v,0,0),R.connect(v,0,1),b.connect(v,0,1)},disconnectGraph(){g.disconnect(m),g.disconnect(_.inputs===void 0?_:_.inputs[0]),m.disconnect(C,0),m.disconnect(R,0),m.disconnect(k,1),m.disconnect(b,1),_.disconnect(N),N.disconnect(T.inputs===void 0?T:T.inputs[0]),N.disconnect(O.inputs===void 0?O:O.inputs[0]),N.disconnect(M.inputs===void 0?M:M.inputs[0]),N.disconnect(D.inputs===void 0?D:D.inputs[0]),T.disconnect(C.gain),O.disconnect(R.gain),M.disconnect(k.gain),D.disconnect(b.gain),C.disconnect(v,0,0),k.disconnect(v,0,0),R.disconnect(v,0,1),b.disconnect(v,0,1)}}},f=(p,g,N,v,I)=>{if(g===1)return d(p,N,v,I);if(g===2)return h(p,N,v,I);throw o()};return(p,E)=>{var A=E,{channelCount:g,channelCountMode:N,pan:v}=A,I=De(A,["channelCount","channelCountMode","pan"]);if(N==="max")throw o();const y=e(p,P(S({},I),{channelCount:1,channelCountMode:N,numberOfInputs:2})),w=t(p,P(S({},I),{channelCount:g,channelCountMode:N,gain:1})),m=t(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:v});let{connectGraph:C,disconnectGraph:T}=f(p,g,w,m,y);Object.defineProperty(m.gain,"defaultValue",{get:()=>0}),Object.defineProperty(m.gain,"maxValue",{get:()=>1}),Object.defineProperty(m.gain,"minValue",{get:()=>-1});const R={get bufferSize(){},get channelCount(){return w.channelCount},set channelCount(M){w.channelCount!==M&&(O&&T(),{connectGraph:C,disconnectGraph:T}=f(p,M,w,m,y),O&&C()),w.channelCount=M},get channelCountMode(){return w.channelCountMode},set channelCountMode(M){if(M==="clamped-max"||M==="max")throw o();w.channelCountMode=M},get channelInterpretation(){return w.channelInterpretation},set channelInterpretation(M){w.channelInterpretation=M},get context(){return w.context},get inputs(){return[w]},get numberOfInputs(){return w.numberOfInputs},get numberOfOutputs(){return w.numberOfOutputs},get pan(){return m.gain},addEventListener(...M){return w.addEventListener(M[0],M[1],M[2])},dispatchEvent(...M){return w.dispatchEvent(M[0])},removeEventListener(...M){return w.removeEventListener(M[0],M[1],M[2])}};let O=!1;const _=()=>{C(),O=!0},k=()=>{T(),O=!1};return a(Ae(R,y),_,k)}},As=(e,n,t,r,o,a,l)=>(i,s)=>{const u=i.createWaveShaper();if(a!==null&&a.name==="webkitAudioContext"&&i.createGain().gain.automationRate===void 0)return t(i,s);Q(u,s);const c=s.curve===null||s.curve instanceof Float32Array?s.curve:new Float32Array(s.curve);if(c!==null&&c.length<2)throw n();U(u,{curve:c},"curve"),U(u,s,"oversample");let d=null,h=!1;return l(u,"curve",g=>()=>g.call(u),g=>N=>(g.call(u,N),h&&(r(N)&&d===null?d=e(i,u):!r(N)&&d!==null&&(d(),d=null)),N)),o(u,()=>{h=!0,r(u.curve)&&(d=e(i,u))},()=>{h=!1,d!==null&&(d(),d=null)})},Es=(e,n,t,r,o)=>(a,u)=>{var c=u,{curve:l,oversample:i}=c,s=De(c,["curve","oversample"]);const d=a.createWaveShaper(),h=a.createWaveShaper();Q(d,s),Q(h,s);const f=t(a,P(S({},s),{gain:1})),p=t(a,P(S({},s),{gain:-1})),g=t(a,P(S({},s),{gain:1})),N=t(a,P(S({},s),{gain:-1}));let v=null,I=!1,E=null;const A={get bufferSize(){},get channelCount(){return d.channelCount},set channelCount(m){f.channelCount=m,p.channelCount=m,d.channelCount=m,g.channelCount=m,h.channelCount=m,N.channelCount=m},get channelCountMode(){return d.channelCountMode},set channelCountMode(m){f.channelCountMode=m,p.channelCountMode=m,d.channelCountMode=m,g.channelCountMode=m,h.channelCountMode=m,N.channelCountMode=m},get channelInterpretation(){return d.channelInterpretation},set channelInterpretation(m){f.channelInterpretation=m,p.channelInterpretation=m,d.channelInterpretation=m,g.channelInterpretation=m,h.channelInterpretation=m,N.channelInterpretation=m},get context(){return d.context},get curve(){return E},set curve(m){if(m!==null&&m.length<2)throw n();if(m===null)d.curve=m,h.curve=m;else{const C=m.length,T=new Float32Array(C+2-C%2),R=new Float32Array(C+2-C%2);T[0]=m[0],R[0]=-m[C-1];const O=Math.ceil((C+1)/2),_=(C+1)/2-1;for(let k=1;k<O;k+=1){const M=k/O*_,b=Math.floor(M),D=Math.ceil(M);T[k]=b===D?m[b]:(1-(M-b))*m[b]+(1-(D-M))*m[D],R[k]=b===D?-m[C-1-b]:-((1-(M-b))*m[C-1-b])-(1-(D-M))*m[C-1-D]}T[O]=C%2===1?m[O-1]:(m[O-2]+m[O-1])/2,d.curve=T,h.curve=R}E=m,I&&(r(E)&&v===null?v=e(a,f):v!==null&&(v(),v=null))},get inputs(){return[f]},get numberOfInputs(){return d.numberOfInputs},get numberOfOutputs(){return d.numberOfOutputs},get oversample(){return d.oversample},set oversample(m){d.oversample=m,h.oversample=m},addEventListener(...m){return f.addEventListener(m[0],m[1],m[2])},dispatchEvent(...m){return f.dispatchEvent(m[0])},removeEventListener(...m){return f.removeEventListener(m[0],m[1],m[2])}};l!==null&&(A.curve=l instanceof Float32Array?l:new Float32Array(l)),i!==A.oversample&&(A.oversample=i);const y=()=>{f.connect(d).connect(g),f.connect(p).connect(h).connect(N).connect(g),I=!0,r(E)&&(v=e(a,f))},w=()=>{f.disconnect(d),d.disconnect(g),f.disconnect(p),p.disconnect(h),h.disconnect(N),N.disconnect(g),I=!1,v!==null&&(v(),v=null)};return o(Ae(A,g),y,w)},re=()=>new DOMException("","NotSupportedError"),bs={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},Ds=(e,n,t,r,o,a,l)=>class extends e{constructor(s,u){const c=o(s),d=S(S({},bs),u),h=t(c,d),f=a(c),p=f?r():null,g=s.sampleRate/2;super(s,!1,h,p),this._detune=n(this,f,h.detune,153600,-153600),this._frequency=n(this,f,h.frequency,g,-g),this._nativeOscillatorNode=h,this._onended=null,this._oscillatorNodeRenderer=p,this._oscillatorNodeRenderer!==null&&d.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=d.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(s){const u=typeof s=="function"?l(this,s):null;this._nativeOscillatorNode.onended=u;const c=this._nativeOscillatorNode.onended;this._onended=c!==null&&c===u?s:c}get type(){return this._nativeOscillatorNode.type}set type(s){this._nativeOscillatorNode.type=s,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(s){this._nativeOscillatorNode.setPeriodicWave(s),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=s)}start(s=0){if(this._nativeOscillatorNode.start(s),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=s),this.context.state!=="closed"){Me(this);const u=()=>{this._nativeOscillatorNode.removeEventListener("ended",u),ie(this)&&Fe(this)};this._nativeOscillatorNode.addEventListener("ended",u)}}stop(s=0){this._nativeOscillatorNode.stop(s),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=s)}},Os=(e,n,t,r,o)=>()=>{const a=new WeakMap;let l=null,i=null,s=null;const u=async(c,d,h)=>{let f=t(c);const p=J(f,d);if(!p){const g={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,detune:f.detune.value,frequency:f.frequency.value,periodicWave:l===null?void 0:l,type:f.type};f=n(d,g),i!==null&&f.start(i),s!==null&&f.stop(s)}return a.set(d,f),p?(await e(d,c.detune,f.detune,h),await e(d,c.frequency,f.frequency,h)):(await r(d,c.detune,f.detune,h),await r(d,c.frequency,f.frequency,h)),await o(c,d,f,h),f};return{set periodicWave(c){l=c},set start(c){i=c},set stop(c){s=c},render(c,d,h){const f=a.get(d);return f!==void 0?Promise.resolve(f):u(c,d,h)}}},Rs={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},Fs=(e,n,t,r,o,a,l)=>class extends e{constructor(s,u){const c=o(s),d=S(S({},Rs),u),h=t(c,d),f=a(c),p=f?r():null;super(s,!1,h,p),this._nativePannerNode=h,this._orientationX=n(this,f,h.orientationX,ee,te),this._orientationY=n(this,f,h.orientationY,ee,te),this._orientationZ=n(this,f,h.orientationZ,ee,te),this._positionX=n(this,f,h.positionX,ee,te),this._positionY=n(this,f,h.positionY,ee,te),this._positionZ=n(this,f,h.positionZ,ee,te),l(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(s){this._nativePannerNode.coneInnerAngle=s}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(s){this._nativePannerNode.coneOuterAngle=s}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(s){this._nativePannerNode.coneOuterGain=s}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(s){this._nativePannerNode.distanceModel=s}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(s){this._nativePannerNode.maxDistance=s}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(s){this._nativePannerNode.panningModel=s}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(s){this._nativePannerNode.refDistance=s}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(s){this._nativePannerNode.rolloffFactor=s}},Ps=(e,n,t,r,o,a,l,i,s,u)=>()=>{const c=new WeakMap;let d=null;const h=async(f,p,g)=>{let N=null,v=a(f);const I={channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation},E=P(S({},I),{coneInnerAngle:v.coneInnerAngle,coneOuterAngle:v.coneOuterAngle,coneOuterGain:v.coneOuterGain,distanceModel:v.distanceModel,maxDistance:v.maxDistance,panningModel:v.panningModel,refDistance:v.refDistance,rolloffFactor:v.rolloffFactor}),A=J(v,p);if("bufferSize"in v)N=r(p,P(S({},I),{gain:1}));else if(!A){const y=P(S({},E),{orientationX:v.orientationX.value,orientationY:v.orientationY.value,orientationZ:v.orientationZ.value,positionX:v.positionX.value,positionY:v.positionY.value,positionZ:v.positionZ.value});v=o(p,y)}if(c.set(p,N===null?v:N),N!==null){if(d===null){if(l===null)throw new Error("Missing the native OfflineAudioContext constructor.");const _=new l(6,f.context.length,p.sampleRate),k=n(_,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});k.connect(_.destination),d=(async()=>{const M=await Promise.all([f.orientationX,f.orientationY,f.orientationZ,f.positionX,f.positionY,f.positionZ].map(async(b,D)=>{const W=t(_,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:D===0?1:0});return await i(_,b,W.offset,g),W}));for(let b=0;b<6;b+=1)M[b].connect(k,0,b),M[b].start(0);return u(_)})()}const y=await d,w=r(p,P(S({},I),{gain:1}));await s(f,p,w,g);const m=[];for(let _=0;_<y.numberOfChannels;_+=1)m.push(y.getChannelData(_));let C=[m[0][0],m[1][0],m[2][0]],T=[m[3][0],m[4][0],m[5][0]],R=r(p,P(S({},I),{gain:1})),O=o(p,P(S({},E),{orientationX:C[0],orientationY:C[1],orientationZ:C[2],positionX:T[0],positionY:T[1],positionZ:T[2]}));w.connect(R).connect(O.inputs[0]),O.connect(N);for(let _=128;_<y.length;_+=128){const k=[m[0][_],m[1][_],m[2][_]],M=[m[3][_],m[4][_],m[5][_]];if(k.some((b,D)=>b!==C[D])||M.some((b,D)=>b!==T[D])){C=k,T=M;const b=_/p.sampleRate;R.gain.setValueAtTime(0,b),R=r(p,P(S({},I),{gain:0})),O=o(p,P(S({},E),{orientationX:C[0],orientationY:C[1],orientationZ:C[2],positionX:T[0],positionY:T[1],positionZ:T[2]})),R.gain.setValueAtTime(1,b),w.connect(R).connect(O.inputs[0]),O.connect(N)}}return N}return A?(await e(p,f.orientationX,v.orientationX,g),await e(p,f.orientationY,v.orientationY,g),await e(p,f.orientationZ,v.orientationZ,g),await e(p,f.positionX,v.positionX,g),await e(p,f.positionY,v.positionY,g),await e(p,f.positionZ,v.positionZ,g)):(await i(p,f.orientationX,v.orientationX,g),await i(p,f.orientationY,v.orientationY,g),await i(p,f.orientationZ,v.orientationZ,g),await i(p,f.positionX,v.positionX,g),await i(p,f.positionY,v.positionY,g),await i(p,f.positionZ,v.positionZ,g)),Te(v)?await s(f,p,v.inputs[0],g):await s(f,p,v,g),v};return{render(f,p,g){const N=c.get(p);return N!==void 0?Promise.resolve(N):h(f,p,g)}}},ks={disableNormalization:!1},Ws=(e,n,t,r)=>class fn{constructor(a,l){const i=n(a),s=r(S(S({},ks),l)),u=e(i,s);return t.add(u),u}static[Symbol.hasInstance](a){return a!==null&&typeof a=="object"&&Object.getPrototypeOf(a)===fn.prototype||t.has(a)}},Vs=(e,n)=>(t,r,o,a)=>(e(r).replay(o),n(r,t,o,a)),Bs=(e,n,t)=>async(r,o,a,l)=>{const i=e(r),s=[...l,r];await Promise.all(i.activeInputs.map((u,c)=>Array.from(u).filter(([d])=>!s.includes(d)).map(async([d,h])=>{const p=await n(d).render(d,o,s),g=r.context.destination;!t(d)&&(r!==g||!t(r))&&p.connect(a,h,c)})).reduce((u,c)=>[...u,...c],[]))},Ls=(e,n,t)=>async(r,o,a,l)=>{const i=n(r);await Promise.all(Array.from(i.activeInputs).map(async([s,u])=>{const d=await e(s).render(s,o,l);t(s)||d.connect(a,u)}))},qs=(e,n,t,r)=>o=>e(gt,()=>gt(o))?Promise.resolve(e(r,r)).then(a=>{if(!a){const l=t(o,512,0,1);o.oncomplete=()=>{l.onaudioprocess=null,l.disconnect()},l.onaudioprocess=()=>o.currentTime,l.connect(o.destination)}return o.startRendering()}):new Promise(a=>{const l=n(o,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});o.oncomplete=i=>{l.disconnect(),a(i.renderedBuffer)},l.connect(o.destination),o.startRendering()}),Zs=e=>(n,t)=>e.set(n,t),Gs={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},Us=(e,n,t,r,o,a)=>class extends e{constructor(i,s){const u=o(i),c=S(S({},Gs),s),d=t(u,c),h=a(u),f=h?r():null;super(i,!1,d,f),this._pan=n(this,h,d.pan)}get pan(){return this._pan}},Xs=(e,n,t,r,o)=>()=>{const a=new WeakMap,l=async(i,s,u)=>{let c=t(i);const d=J(c,s);if(!d){const h={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,pan:c.pan.value};c=n(s,h)}return a.set(s,c),d?await e(s,i.pan,c.pan,u):await r(s,i.pan,c.pan,u),Te(c)?await o(i,s,c.inputs[0],u):await o(i,s,c,u),c};return{render(i,s,u){const c=a.get(s);return c!==void 0?Promise.resolve(c):l(i,s,u)}}},Ys=e=>()=>{if(e===null)return!1;try{new e({length:1,sampleRate:44100})}catch{return!1}return!0},js=(e,n)=>async()=>{if(e===null)return!0;if(n===null)return!1;const t=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),r=new n(1,128,44100),o=URL.createObjectURL(t);let a=!1,l=!1;try{await r.audioWorklet.addModule(o);const i=new e(r,"a",{numberOfOutputs:0}),s=r.createOscillator();i.port.onmessage=()=>a=!0,i.onprocessorerror=()=>l=!0,s.connect(i),s.start(0),await r.startRendering()}catch{}finally{URL.revokeObjectURL(o)}return a&&!l},zs=(e,n)=>()=>{if(n===null)return Promise.resolve(!1);const t=new n(1,1,44100),r=e(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(o=>{t.oncomplete=()=>{r.disconnect(),o(t.currentTime!==0)},t.startRendering()})},$s=()=>new DOMException("","UnknownError"),Qs={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},Hs=(e,n,t,r,o,a,l)=>class extends e{constructor(s,u){const c=o(s),d=S(S({},Qs),u),h=t(c,d),p=a(c)?r():null;super(s,!0,h,p),this._isCurveNullified=!1,this._nativeWaveShaperNode=h,l(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(s){if(s===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(s.length<2)throw n();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=s}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(s){this._nativeWaveShaperNode.oversample=s}},xs=(e,n,t)=>()=>{const r=new WeakMap,o=async(a,l,i)=>{let s=n(a);if(!J(s,l)){const c={channelCount:s.channelCount,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,curve:s.curve,oversample:s.oversample};s=e(l,c)}return r.set(l,s),Te(s)?await t(a,l,s.inputs[0],i):await t(a,l,s,i),s};return{render(a,l,i){const s=r.get(l);return s!==void 0?Promise.resolve(s):o(a,l,i)}}},Js=()=>typeof window=="undefined"?null:window,Ks=(e,n)=>t=>{t.copyFromChannel=(r,o,a=0)=>{const l=e(a),i=e(o);if(i>=t.numberOfChannels)throw n();const s=t.length,u=t.getChannelData(i),c=r.length;for(let d=l<0?-l:0;d+l<s&&d<c;d+=1)r[d]=u[d+l]},t.copyToChannel=(r,o,a=0)=>{const l=e(a),i=e(o);if(i>=t.numberOfChannels)throw n();const s=t.length,u=t.getChannelData(i),c=r.length;for(let d=l<0?-l:0;d+l<s&&d<c;d+=1)u[d+l]=r[d]}},ea=e=>n=>{n.copyFromChannel=(t=>(r,o,a=0)=>{const l=e(a),i=e(o);if(l<n.length)return t.call(n,r,i,l)})(n.copyFromChannel),n.copyToChannel=(t=>(r,o,a=0)=>{const l=e(a),i=e(o);if(l<n.length)return t.call(n,r,i,l)})(n.copyToChannel)},ta=e=>(n,t)=>{const r=t.createBuffer(1,1,44100);n.buffer===null&&(n.buffer=r),e(n,"buffer",o=>()=>{const a=o.call(n);return a===r?null:a},o=>a=>o.call(n,a===null?r:a))},na=(e,n)=>(t,r)=>{r.channelCount=1,r.channelCountMode="explicit",Object.defineProperty(r,"channelCount",{get:()=>1,set:()=>{throw e()}}),Object.defineProperty(r,"channelCountMode",{get:()=>"explicit",set:()=>{throw e()}});const o=t.createBufferSource();n(r,()=>{const i=r.numberOfInputs;for(let s=0;s<i;s+=1)o.connect(r,0,s)},()=>o.disconnect(r))},pn=(e,n,t)=>e.copyFromChannel===void 0?e.getChannelData(t)[0]:(e.copyFromChannel(n,t),n[0]),mn=e=>{if(e===null)return!1;const n=e.length;return n%2!==0?e[Math.floor(n/2)]!==0:e[n/2-1]+e[n/2]!==0},We=(e,n,t,r)=>{let o=e;for(;!o.hasOwnProperty(n);)o=Object.getPrototypeOf(o);const{get:a,set:l}=Object.getOwnPropertyDescriptor(o,n);Object.defineProperty(e,n,{get:t(a),set:r(l)})},ra=e=>P(S({},e),{channelCount:e.numberOfOutputs}),oa=e=>{const{imag:n,real:t}=e;return n===void 0?t===void 0?P(S({},e),{imag:[0,0],real:[0,0]}):P(S({},e),{imag:Array.from(t,()=>0),real:t}):t===void 0?P(S({},e),{imag:n,real:Array.from(n,()=>0)}):P(S({},e),{imag:n,real:t})},gn=(e,n,t)=>{try{e.setValueAtTime(n,t)}catch(r){if(r.code!==9)throw r;gn(e,n,t+1e-7)}},sa=e=>{const n=e.createBufferSource();n.start();try{n.start()}catch{return!0}return!1},aa=e=>{const n=e.createBufferSource(),t=e.createBuffer(1,1,44100);n.buffer=t;try{n.start(0,1)}catch{return!1}return!0},ca=e=>{const n=e.createBufferSource();n.start();try{n.stop()}catch{return!1}return!0},It=e=>{const n=e.createOscillator();try{n.start(-1)}catch(t){return t instanceof RangeError}return!1},Nn=e=>{const n=e.createBuffer(1,1,44100),t=e.createBufferSource();t.buffer=n,t.start(),t.stop();try{return t.stop(),!0}catch{return!1}},St=e=>{const n=e.createOscillator();try{n.stop(-1)}catch(t){return t instanceof RangeError}return!1},ia=e=>{e.start=(n=>(t=0,r=0,o)=>{const a=e.buffer,l=a===null?r:Math.min(a.duration,r);a!==null&&l>a.duration-.5/e.context.sampleRate?n.call(e,t,0,0):n.call(e,t,l,o)})(e.start)},vn=(e,n)=>{const t=n.createGain();e.connect(t);const r=(o=>()=>{o.call(e,t),e.removeEventListener("ended",r)})(e.disconnect);e.addEventListener("ended",r),Ae(e,t),e.stop=(o=>{let a=!1;return(l=0)=>{if(a)try{o.call(e,l)}catch{t.gain.setValueAtTime(0,l)}else o.call(e,l),a=!0}})(e.stop)},Ve=(e,n)=>t=>{const r={value:e};return Object.defineProperties(t,{currentTarget:r,target:r}),typeof n=="function"?n.call(e,t):n.handleEvent.call(e,t)},la=tr(Ne),ua=cr(Ne),da=fo(Qe),Cn=new WeakMap,ha=Eo(Cn),le=Xr(new Map,new WeakMap),se=Js(),yn=Jo(le,ge),wn=Ao(ne),H=Bs(ne,wn,me),fa=dr(yn,X,H),G=Do(Kt),ve=ys(se),q=Go(ve),_n=new WeakMap,In=wo(Ve),Be=ns(se),Sn=Bo(Be),Mn=Lo(se),pa=qo(se),$=Vr(nr(Qt),ar(la,ua,ze,da,$e,ne,ha,Re,X,Ne,ie,me,Ue),le,Vo(ht,$e,ne,X,Oe,ie),ge,He,re,io(ze,ht,ne,X,Oe,G,ie,q),mo(_n,ne,pe),In,G,Sn,Mn,pa,q),ma=ur($,fa,ge,yn,G,q),Tn=new WeakSet,Yt=Ko(se),An=no(new Uint32Array(1)),En=Ks(An,ge),bn=ea(An),ga=fr(Tn,le,re,Yt,ve,Ys(Yt),En,bn),Je=ir(oe),Dn=Ls(wn,Pe,me),ue=xr(Dn),Le=ts(Je,le,sa,aa,ca,It,Nn,St,ia,ta(We),vn),de=Vs(bo(Pe),Dn),Na=gr(ue,Le,X,de,H),ae=Br(rr(xt),_n,Jt,Lr,Qn,Hn,xn,Jn,Kn,lt,zt,Be,gn),va=mr($,Na,ae,x,Le,G,q,Ve),Ca=Tr($,Ar,ge,x,rs(oe,We),G,q,H),ya=Ur(ue,dn,X,de,H),Ce=Zs(Cn),wa=Gr($,ae,ya,He,dn,G,q,Ce),Ee=Ho(Ne,Mn),_a=na(x,Ee),be=as(Be,_a),Ia=zr(be,X,H),Sa=jr($,Ia,be,G,q),Ma=Hr(_t,X,H),Ta=Qr($,Ma,_t,G,q,ra),Aa=ls(Je,Le,oe,Ee),Ke=is(Je,le,Aa,It,St),Ea=to(ue,Ke,X,de,H),ba=eo($,ae,Ea,Ke,G,q,Ve),On=us(re,We),Da=so(On,X,H),Oa=oo($,Da,On,G,q,Ce),Ra=ho(ue,hn,X,de,H),Fa=uo($,ae,Ra,hn,G,q,Ce),Rn=ds(re),Pa=vo(ue,Rn,X,de,H),ka=No($,ae,Pa,Rn,re,G,q,Ce),Wa=To(ue,oe,X,de,H),Va=Mo($,ae,Wa,oe,G,q),Ba=ms(He,x,xe,re),Fn=qs(le,oe,xe,zs(oe,ve)),La=Wo(Le,X,ve,H,Fn),qa=hs(Ba),Za=Po($,qa,La,G,q,Ce),Ga=Er(ae,be,Ke,xe,re,pn,q,We),Ua=new WeakMap,Xa=Qo(Ca,Ga,In,q,Ua,Ve),Pn=ws(Je,le,It,Nn,St,vn),Ya=Os(ue,Pn,X,de,H),ja=Ds($,ae,Pn,Ya,G,q,Ve),kn=Jr(Le),za=Es(kn,x,oe,mn,Ee),et=As(kn,x,za,mn,Ee,Be,We),$a=Is(ze,x,be,oe,xe,et,re,$e,pn,Ee),Wn=_s($a),Qa=Ps(ue,be,Ke,oe,Wn,X,ve,de,H,Fn),Ha=Fs($,ae,Wn,Qa,G,q,Ce),xa=Ss(ge),Ja=Ws(xa,G,new WeakSet,oa),Ka=Ts(be,_t,oe,et,re,Ee),Vn=Ms(Ka,re),ec=Xs(ue,Vn,X,de,H),tc=Us($,ae,Vn,ec,G,q),nc=xs(et,X,H),rc=Hs($,x,et,nc,G,q,Ce),oc=Uo(se),sc=_o(se),ac=new WeakMap,cc=Oo(ac,ve),jt=os(se),ic=oc?sr(le,re,yo(se),sc,Io(er),G,cc,q,jt,new WeakMap,new WeakMap,js(jt,ve),se):void 0,lc=Zo(Sn,q),uc=co(Tn,le,ao,Co,new WeakSet,G,lc,pt,gt,En,bn),dc=qr(ic,ma,ga,va,wa,Sa,Ta,ba,Oa,uc,Fa,ka,Va,Za,Xa,ja,Ha,Ja,tc,rc),hc=Xo($,gs,G,q),fc=jo($,Ns,G,q),pc=zo($,vs,G,q),mc=Cs(x,q),gc=$o($,mc,G),Nc=Mr(dc,x,re,$s,hc,fc,pc,gc,Be);let ct,Ge;function tt(){return ct||(ct=new Nc),ct}function Bn(){if(!Ge){const e=tt();Ge=e.createGain(),Ge.connect(e.destination)}return Ge}const it=new Map;async function vc(e){const n=typeof e=="string"?[e]:e,t=n.find(r=>it.has(r));if(t)return it.get(t);for(const r of n){console.debug(`Fetching audio at url ${r}`);const o=await fetch(r).then(a=>a.arrayBuffer());try{const a=await tt().decodeAudioData(o);return it.set(r,a),a}catch{console.warn(`Failed to decode "${r}". The format is probably unsupported on this browser.`)}}throw new Error(`No more urls to try: ${n.join(", ")}`)}function $c(e,n=Bn()){const t=tt().createBufferSource();return t.buffer=e,t.connect(n),t}function Qc(){const e=tt().createGain();return e.connect(Bn()),e}function Hc(e){const n=e/100;return 2**(n/12)}function xc(...e){return async()=>{await Promise.all(e.map(vc))}}export{tt as a,vc as b,xc as c,$c as d,Hc as e,Qc as f,Bn as g,wc as p};
